// Code generated by oastools. DO NOT EDIT.

package {{.Header.PackageName}}

import (
	"encoding/json"
	"net/http"
)

// WriteJSON writes a JSON response with the given status code
func WriteJSON(w http.ResponseWriter, statusCode int, body any) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(statusCode)
	if body != nil {
		return json.NewEncoder(w).Encode(body)
	}
	return nil
}

// WriteError writes a JSON error response
func WriteError(w http.ResponseWriter, statusCode int, message string) error {
	return WriteJSON(w, statusCode, map[string]string{"error": message})
}

// WriteNoContent writes a 204 No Content response
func WriteNoContent(w http.ResponseWriter) {
	w.WriteHeader(http.StatusNoContent)
}

{{range .Operations}}
{{- $respType := .ResponseType -}}
// {{.ResponseType}} encapsulates possible responses for {{.MethodName}}.
type {{.ResponseType}} struct {
	statusCode  int
	body        any
	contentType string
}

// StatusCode returns the HTTP status code for this response.
func (r {{.ResponseType}}) StatusCode() int { return r.statusCode }

// Body returns the response body.
func (r {{.ResponseType}}) Body() any { return r.body }

// ContentType returns the Content-Type header value.
func (r {{.ResponseType}}) ContentType() string {
	if r.contentType != "" {
		return r.contentType
	}
	return "application/json"
}

// WriteTo writes the response to the http.ResponseWriter.
func (r {{.ResponseType}}) WriteTo(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", r.ContentType())
	w.WriteHeader(r.statusCode)
	if r.body != nil {
		return json.NewEncoder(w).Encode(r.body)
	}
	return nil
}

{{range .StatusCodes}}
// {{.MethodName}} creates a {{.Code}} response{{if .Description}} - {{.Description}}{{end}}.
{{- if .HasBody}}
func ({{$respType}}) {{.MethodName}}(body {{.BodyType}}) {{$respType}} {
	return {{$respType}}{
		statusCode:  {{if .IsDefault}}500{{else if .IsWildcard}}{{.StatusCodeInt}}{{else}}{{.StatusCodeInt}}{{end}},
		body:        body,
		contentType: "{{if .ContentType}}{{.ContentType}}{{else}}application/json{{end}}",
	}
}
{{- else}}
func ({{$respType}}) {{.MethodName}}() {{$respType}} {
	return {{$respType}}{
		statusCode: {{if .IsDefault}}500{{else if .IsWildcard}}{{.StatusCodeInt}}{{else}}{{.StatusCodeInt}}{{end}},
	}
}
{{- end}}

{{end}}
{{end}}
