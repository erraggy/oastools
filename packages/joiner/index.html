
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="High-performance Go library, CLI, and MCP server for working with OpenAPI Specifications (OAS 2.0, 3.0, 3.1, 3.2).">
      
      
      
        <link rel="canonical" href="https://erraggy.github.io/oastools/packages/joiner/">
      
      
        <link rel="prev" href="../overlay/">
      
      
        <link rel="next" href="../differ/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Joiner - oastools</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#joiner-package-deep-dive" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="oastools" class="md-header__button md-logo" aria-label="oastools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            oastools
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Joiner
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/erraggy/oastools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    erraggy/oastools
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="oastools" class="md-nav__button md-logo" aria-label="oastools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    oastools
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/erraggy/oastools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    erraggy/oastools
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://oastools.robnrob.com" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üåê Try Online
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Get Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Go Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI / CI/CD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mcp-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../claude-code-plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Claude Code Plugin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why-oastools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Why oastools?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../breaking-changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Detecting API Breaking Changes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generator_beyond_boilerplate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generator Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../corpus-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Corpus Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mcp-ux-findings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP UX Findings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmarks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/validation-pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validation Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/validate-and-fix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validate and Fix
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/version-conversion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Conversion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/version-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version Migration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/multi-api-merge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-API Merge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/collision-resolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Collision Resolution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/schema-deduplication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Deduplication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/schema-renaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Renaming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/fixer-showcase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fixer Showcase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/pipeline-compositions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline Compositions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/breaking-change-detection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Breaking Change Detection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/overlay-transformations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overlay Transformations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/workflows/http-validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP Validation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Programmatic API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Programmatic API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/programmatic-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/programmatic-api/builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Builder
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Walker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Walker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/walker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/walker/api-statistics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Statistics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/walker/security-audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security Audit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/walker/vendor-extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vendor Extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/walker/public-api-filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Public API Filter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/walker/api-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/walker/reference-collector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reference Collector
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Code Generation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Code Generation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/petstore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/petstore/stdlib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Standard Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/petstore/chi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chi Router
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Package Deep Dives
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Package Deep Dives
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parser
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fixer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fixer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Converter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overlay
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Joiner
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Joiner
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#collision-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collision Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collision-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collision Handlers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-deduplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic Deduplication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-rewriting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference Rewriting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-styles" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Styles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Styles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functional-options-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functional Options API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#struct-based-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Struct-Based API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practical-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Practical Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Practical Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-document-joining" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Document Joining
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-schema-collisions-with-rename-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Schema Collisions with Rename Strategies
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operation-aware-schema-renaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation-Aware Schema Renaming
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operation-Aware Schema Renaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Solution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      
        How It Works
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renamecontext-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenameContext Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenameContext Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-fields-always-available" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Fields (Always Available)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-context-fields-when-operationcontext-is-true" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation Context Fields (When OperationContext is true)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregate-context-fields-multi-operation-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aggregate Context Fields (Multi-Operation Schemas)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usagetype-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        UsageType Values
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-functions-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Template Functions Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template Functions Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tag-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tag Functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Case Functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-helpers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Helpers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primary-operation-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Operation Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-template-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Template Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-shared-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Shared Schemas
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Limitations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Limitations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operation-context-for-base-document-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation Context for Base Document Schemas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oas-20-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        OAS 2.0 Support
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webhook-support-oas-31" class="md-nav__link">
    <span class="md-ellipsis">
      
        Webhook Support (OAS 3.1+)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Callback Support
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-rename-templates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging Rename Templates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-with-semantic-deduplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with Semantic Deduplication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-pitfalls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Pitfalls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-collision-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Collision Handlers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Collision Handlers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-collision-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to Use Collision Handlers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collisioncontext-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        CollisionContext Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolution-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resolution Actions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handler-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handler Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#observe-only-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Observe-Only (Logging)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Decisions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-schema-merging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Schema Merging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-filtered-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type-Filtered Handlers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supported-collision-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Collision Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warnings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Warnings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace-prefixes-for-team-based-apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Namespace Prefixes for Team-Based APIs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-deduplication-across-documents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic Deduplication Across Documents
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Semantic Deduplication Across Documents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#empty-schemas-are-preserved" class="md-nav__link">
    <span class="md-ellipsis">
      
        Empty Schemas Are Preserved
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema-equivalence-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schema Equivalence Detection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-performance-joining-with-pre-parsed-documents" class="md-nav__link">
    <span class="md-ellipsis">
      
        High-Performance Joining with Pre-Parsed Documents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collision-report-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collision Report Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlay-integration-during-join" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overlay Integration During Join
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#different-strategies-per-component-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        Different Strategies per Component Type
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joinerconfig-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        JoinerConfig Fields
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Available Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joinresult-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        JoinResult Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JoinResult Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joinresult-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        JoinResult Methods
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-map-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source Map Integration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-chaining" class="md-nav__link">
    <span class="md-ellipsis">
      
        Package Chaining
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#microservices-consolidation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Microservices Consolidation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-gateway-aggregation" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Gateway Aggregation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-document-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extension Document Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CLI Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-schema-renaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Schema Renaming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-aware-renaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation-Aware Renaming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primary-operation-policy_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Operation Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Template Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlay-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overlay Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combined-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combined Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      
        Learn More
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../differ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Differ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../httpvalidator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP Validator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Builder
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../walker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Walker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/building-the-mcp-server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building the MCP Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../whitepaper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üìÑ White Paper
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Project Info
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project Info
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTORS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://pkg.go.dev/github.com/erraggy/oastools" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#collision-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collision Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collision-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collision Handlers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-deduplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic Deduplication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-rewriting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference Rewriting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-styles" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Styles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Styles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functional-options-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functional Options API
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#struct-based-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Struct-Based API
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practical-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Practical Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Practical Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-document-joining" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Document Joining
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-schema-collisions-with-rename-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Schema Collisions with Rename Strategies
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operation-aware-schema-renaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation-Aware Schema Renaming
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operation-Aware Schema Renaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Solution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      
        How It Works
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renamecontext-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenameContext Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenameContext Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-fields-always-available" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Fields (Always Available)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-context-fields-when-operationcontext-is-true" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation Context Fields (When OperationContext is true)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aggregate-context-fields-multi-operation-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aggregate Context Fields (Multi-Operation Schemas)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usagetype-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        UsageType Values
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-functions-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Template Functions Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template Functions Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tag-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tag Functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Case Functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-helpers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Helpers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primary-operation-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Operation Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-template-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Template Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-shared-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Shared Schemas
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Limitations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Limitations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operation-context-for-base-document-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation Context for Base Document Schemas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oas-20-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        OAS 2.0 Support
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webhook-support-oas-31" class="md-nav__link">
    <span class="md-ellipsis">
      
        Webhook Support (OAS 3.1+)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Callback Support
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-rename-templates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging Rename Templates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-with-semantic-deduplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with Semantic Deduplication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-pitfalls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Pitfalls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-collision-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Collision Handlers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Collision Handlers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-collision-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to Use Collision Handlers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collisioncontext-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        CollisionContext Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolution-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resolution Actions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handler-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handler Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handler Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#observe-only-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Observe-Only (Logging)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Decisions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-schema-merging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Schema Merging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-filtered-handlers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type-Filtered Handlers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supported-collision-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Collision Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warnings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Warnings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespace-prefixes-for-team-based-apis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Namespace Prefixes for Team-Based APIs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-deduplication-across-documents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic Deduplication Across Documents
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Semantic Deduplication Across Documents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#empty-schemas-are-preserved" class="md-nav__link">
    <span class="md-ellipsis">
      
        Empty Schemas Are Preserved
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema-equivalence-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schema Equivalence Detection
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-performance-joining-with-pre-parsed-documents" class="md-nav__link">
    <span class="md-ellipsis">
      
        High-Performance Joining with Pre-Parsed Documents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collision-report-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collision Report Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlay-integration-during-join" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overlay Integration During Join
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#different-strategies-per-component-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        Different Strategies per Component Type
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joinerconfig-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        JoinerConfig Fields
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Available Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joinresult-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        JoinResult Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JoinResult Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#joinresult-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        JoinResult Methods
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-map-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source Map Integration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-chaining" class="md-nav__link">
    <span class="md-ellipsis">
      
        Package Chaining
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#microservices-consolidation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Microservices Consolidation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-gateway-aggregation" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Gateway Aggregation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-document-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extension Document Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        CLI Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CLI Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-schema-renaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Schema Renaming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operation-aware-renaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operation-Aware Renaming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primary-operation-policy_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primary Operation Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Template Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlay-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overlay Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combined-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combined Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      
        Learn More
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<p><a id="top"></a></p>
<h1 id="joiner-package-deep-dive">Joiner Package Deep Dive</h1>
<div class="admonition tip">
<p class="admonition-title">Try it Online</p>
<p>No installation required! <a href="https://oastools.robnrob.com/join">Try the joiner in your browser ‚Üí</a></p>
</div>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#key-concepts">Key Concepts</a></li>
<li><a href="#api-styles">API Styles</a></li>
<li><a href="#practical-examples">Practical Examples</a></li>
<li><a href="#operation-aware-schema-renaming">Operation-Aware Schema Renaming</a></li>
<li><a href="#custom-collision-handlers">Custom Collision Handlers</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#configuration-reference">Configuration Reference</a></li>
<li><a href="#joinresult-structure">JoinResult Structure</a></li>
<li><a href="#source-map-integration">Source Map Integration</a></li>
<li><a href="#package-chaining">Package Chaining</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#common-patterns">Common Patterns</a></li>
<li><a href="#cli-usage">CLI Usage</a></li>
</ul>
<hr />
<p>The <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner"><code>joiner</code></a> package merges multiple OpenAPI Specification documents into a single unified document. It provides sophisticated collision handling strategies, automatic reference rewriting, and semantic deduplication for large-scale API consolidation scenarios.</p>
<h2 id="overview">Overview</h2>
<p>When organizations maintain multiple API specifications‚Äîwhether from different teams, microservices, or API modules‚Äîthe joiner enables consolidation into a single document. This is particularly valuable for generating unified documentation, client SDKs, or gateway configurations from distributed API definitions.</p>
<p>The joiner supports OAS 2.0 documents merging with other 2.0 documents, and all OAS 3.x versions together (3.0.x, 3.1.x, 3.2.x). It uses the version and format (JSON or YAML) from the first document as the result format, ensuring consistency in the output.</p>
<p><a href="#top">‚Üë Back to top</a></p>
<h2 id="key-concepts">Key Concepts</h2>
<h3 id="collision-handling">Collision Handling</h3>
<p>When merging multiple documents, name collisions are inevitable‚Äîtwo documents might define different schemas with the same name, or contain overlapping paths. The joiner provides seven collision strategies to handle these situations:</p>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>StrategyFailOnCollision</code></td>
<td>Return error on any collision (default, safest)</td>
</tr>
<tr>
<td><code>StrategyAcceptLeft</code></td>
<td>Keep value from first/left document</td>
</tr>
<tr>
<td><code>StrategyAcceptRight</code></td>
<td>Keep value from last/right document (overwrite)</td>
</tr>
<tr>
<td><code>StrategyFailOnPaths</code></td>
<td>Fail only on path collisions, allow schema merging</td>
</tr>
<tr>
<td><code>StrategyRenameLeft</code></td>
<td>Rename left schema, keep right under original name</td>
</tr>
<tr>
<td><code>StrategyRenameRight</code></td>
<td>Rename right schema, keep left under original name</td>
</tr>
<tr>
<td><code>StrategyDeduplicateEquivalent</code></td>
<td>Merge structurally identical schemas</td>
</tr>
</tbody>
</table>
<p>Strategies can be set globally or per-component type (paths, schemas, other components), giving fine-grained control over merge behavior.</p>
<h3 id="collision-handlers">Collision Handlers</h3>
<p>For advanced collision handling beyond the built-in strategies, you can register a <strong>collision handler</strong> callback. The handler is invoked when a collision is detected, receiving full context about both values and their sources. Handlers can:</p>
<ol>
<li><strong>Observe and log</strong> - Return <code>ContinueWithStrategy()</code> to log collisions while deferring to the configured strategy</li>
<li><strong>Make decisions</strong> - Return <code>AcceptLeft()</code>, <code>AcceptRight()</code>, <code>Rename()</code>, <code>Deduplicate()</code>, or <code>Fail()</code> to override the strategy</li>
<li><strong>Provide custom values</strong> - Return <code>UseCustomValue(mergedSchema)</code> to supply a custom merged result</li>
</ol>
<p>If a handler returns an error, the joiner logs a warning and falls back to the configured strategy, ensuring handlers cannot break join operations.</p>
<p>See <a href="#custom-collision-handlers">Custom Collision Handlers</a> for complete documentation and examples.</p>
<h3 id="semantic-deduplication">Semantic Deduplication</h3>
<p>Beyond handling same-named collisions, the joiner can identify and consolidate schemas that are structurally identical but have different names. When your Users API and Orders API both define equivalent <code>Address</code> and <code>Location</code> schemas, semantic deduplication recognizes they're identical and consolidates them.</p>
<h3 id="reference-rewriting">Reference Rewriting</h3>
<p>When schemas are renamed or deduplicated, all <code>$ref</code> references throughout the merged document are automatically updated. This ensures the resulting document maintains valid internal references without manual intervention.</p>
<p><a href="#top">‚Üë Back to top</a></p>
<h2 id="api-styles">API Styles</h2>
<p>See also: <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner#example-package">Basic example</a>, <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner#example-package-CustomStrategies">Custom strategies example</a>, <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner#example-package-SemanticDeduplication">Semantic deduplication example</a> on pkg.go.dev</p>
<h3 id="functional-options-api">Functional Options API</h3>
<p>Best for single merge operations with inline configuration:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithFilePaths</span><span class="p">(</span><span class="s">&quot;base.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ext.yaml&quot;</span><span class="p">),</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithPathStrategy</span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyFailOnCollision</span><span class="p">),</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithSchemaStrategy</span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptLeft</span><span class="p">),</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">)</span>
</code></pre></div>
<h3 id="struct-based-api">Struct-Based API</h3>
<p>Best for multiple merge operations or complex configuration:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">PathStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyFailOnPaths</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyDeduplicateEquivalent</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="nx">config</span><span class="p">.</span><span class="nx">EquivalenceMode</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;deep&quot;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nx">result1</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;api1-base.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;api1-ext.yaml&quot;</span><span class="p">})</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="nx">result2</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;api2-base.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;api2-ext.yaml&quot;</span><span class="p">})</span>
</code></pre></div>
<p><a href="#top">‚Üë Back to top</a></p>
<h2 id="practical-examples">Practical Examples</h2>
<h3 id="basic-document-joining">Basic Document Joining</h3>
<p>The simplest use case merges two or more documents with default settings:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="s">&quot;os&quot;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="s">&quot;path/filepath&quot;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="p">)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="nx">outputPath</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">filepath</span><span class="p">.</span><span class="nx">Join</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">TempDir</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;merged.yaml&quot;</span><span class="p">)</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">        </span><span class="s">&quot;users-api.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">        </span><span class="s">&quot;orders-api.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">        </span><span class="s">&quot;products-api.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">WriteResult</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">outputPath</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Successfully merged %d documents\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Output version: %s\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Version</span><span class="p">)</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Total paths: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Stats</span><span class="p">.</span><span class="nx">PathCount</span><span class="p">)</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Total schemas: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Stats</span><span class="p">.</span><span class="nx">SchemaCount</span><span class="p">)</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Collisions resolved: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionCount</span><span class="p">)</span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Example Input (users-api.yaml):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">openapi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0.3</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Users API</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="nt">/users</span><span class="p">:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">listUsers</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Success</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">                </span><span class="nt">items</span><span class="p">:</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">                  </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/User&#39;</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">    </span><span class="nt">User</span><span class="p">:</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div>
<p><strong>Example Input (orders-api.yaml):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">openapi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0.3</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Orders API</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="nt">/orders</span><span class="p">:</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">listOrders</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Success</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">                </span><span class="nt">items</span><span class="p">:</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">                  </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/Order&#39;</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">    </span><span class="nt">Order</span><span class="p">:</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">        </span><span class="nt">userId</span><span class="p">:</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</code></pre></div>
<p><strong>Example Output (merged.yaml):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">openapi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0.3</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Users API</span><span class="w">  </span><span class="c1"># Info from first document</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="nt">/users</span><span class="p">:</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">listUsers</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Success</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">                </span><span class="nt">items</span><span class="p">:</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">                  </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/User&#39;</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">  </span><span class="nt">/orders</span><span class="p">:</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">listOrders</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Success</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">                </span><span class="nt">items</span><span class="p">:</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">                  </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/Order&#39;</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="w">    </span><span class="nt">User</span><span class="p">:</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="w">    </span><span class="nt">Order</span><span class="p">:</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a><span class="w">        </span><span class="nt">userId</span><span class="p">:</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</code></pre></div>
<h3 id="handling-schema-collisions-with-rename-strategies">Handling Schema Collisions with Rename Strategies</h3>
<p>When different APIs define schemas with the same name but different structures, use rename strategies to preserve both:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="p">)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="c1">// Keep left schema, rename right schema</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyRenameRight</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">    </span><span class="c1">// Template for renamed schemas: &quot;User_orders-api&quot; format</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{.Name}}_{{.Source}}&quot;</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="w">    </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">        </span><span class="s">&quot;users-api.yaml&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// Has User schema (id, name, email)</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">        </span><span class="s">&quot;orders-api.yaml&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// Has User schema (id, customerId) - different structure!</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="w">    </span><span class="c1">// Result will have:</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="w">    </span><span class="c1">// - User (from users-api.yaml, original name)</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="w">    </span><span class="c1">// - User_orders-api (from orders-api.yaml, renamed)</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="w">    </span><span class="c1">// All $refs in orders-api paths are rewritten to User_orders-api</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Collisions resolved: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionCount</span><span class="p">)</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Warnings</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;  %s\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="p">)</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Example Output:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Collisions resolved: 1
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  schema &#39;User&#39; collision: right renamed to &#39;User_orders-api&#39;
</code></pre></div>
<p><a href="#top">Back to top</a></p>
<h2 id="operation-aware-schema-renaming">Operation-Aware Schema Renaming</h2>
<h3 id="the-problem">The Problem</h3>
<p>When joining OpenAPI specifications from different services, you often encounter generic schema names that collide. Consider two microservices:</p>
<p><strong>users-service.yaml:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">openapi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0.3</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Users Service</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="nt">/users</span><span class="p">:</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">listUsers</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">users</span><span class="p p-Indicator">]</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Success</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">                </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/Response&#39;</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="nt">Response</span><span class="p">:</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">        </span><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">          </span><span class="nt">items</span><span class="p">:</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">            </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/User&#39;</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">        </span><span class="nt">total</span><span class="p">:</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">    </span><span class="nt">User</span><span class="p">:</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div>
<p><strong>orders-service.yaml:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">openapi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0.3</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Orders Service</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">  </span><span class="nt">/orders</span><span class="p">:</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">listOrders</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">orders</span><span class="p p-Indicator">]</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Success</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">                </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/Response&#39;</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">    </span><span class="nt">Response</span><span class="p">:</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">        </span><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">          </span><span class="nt">items</span><span class="p">:</span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">            </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/Order&#39;</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">        </span><span class="nt">count</span><span class="p">:</span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">    </span><span class="nt">Order</span><span class="p">:</span>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="w">        </span><span class="nt">userId</span><span class="p">:</span>
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</code></pre></div>
<p>Both services define a <code>Response</code> schema with different structures. A basic rename template like <code>{{.Name}}_{{.Source}}</code> would produce <code>Response_orders_service</code>‚Äîfunctional but not descriptive. For programmatically generated specs or code generation, you want names like <code>ListUsersResponse</code> and <code>ListOrdersResponse</code>.</p>
<h3 id="the-solution">The Solution</h3>
<p>Operation-aware renaming traces schemas back to their originating operations, enabling semantic names based on paths, methods, operation IDs, and tags:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="p">)</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyRenameRight</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">    </span><span class="c1">// Enable operation context for rich rename templates</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">OperationContext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">    </span><span class="c1">// Use operation-derived naming</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{pascalCase .OperationID}}{{.Name}}&quot;</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">    </span><span class="c1">// Select how to pick the primary operation when a schema</span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">    </span><span class="c1">// is referenced by multiple operations</span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">PrimaryOperationPolicy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">PolicyMostSpecific</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">    </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">        </span><span class="s">&quot;users-service.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">        </span><span class="s">&quot;orders-service.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>
<a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a><span class="w">    </span><span class="c1">// Result will have:</span>
<a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a><span class="w">    </span><span class="c1">// - Response (from users-service, kept original)</span>
<a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a><span class="w">    </span><span class="c1">// - ListOrdersResponse (from orders-service, renamed with context)</span>
<a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a>
<a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Schemas renamed with operation context\n&quot;</span><span class="p">)</span>
<a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Collisions: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionCount</span><span class="p">)</span>
<a id="__codelineno-10-40" name="__codelineno-10-40" href="#__codelineno-10-40"></a><span class="p">}</span>
</code></pre></div>
<h3 id="how-it-works">How It Works</h3>
<p>The joiner builds a <strong>reference graph</strong> that maps each schema to the operations that use it. This graph captures both direct references (operation ‚Üí schema) and indirect references (operation ‚Üí schema ‚Üí nested schema).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>‚îÇ   GET /users    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    Response     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ      User       ‚îÇ
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>‚îÇ   listUsers     ‚îÇ     ‚îÇ   (schema)      ‚îÇ     ‚îÇ   (schema)      ‚îÇ
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>        ‚îÇ                       ‚ñ≤                       ‚ñ≤
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>        ‚îÇ                       ‚îÇ                       ‚îÇ
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>                      Reference Graph
</code></pre></div>
<p>The reference graph construction:</p>
<ol>
<li><strong>Traverses all paths and operations</strong> - Records which schemas are referenced in request bodies, responses, parameters, and headers</li>
<li><strong>Tracks schema-to-schema references</strong> - Records <code>$ref</code> chains through properties, items, allOf/anyOf/oneOf, and other composition keywords</li>
<li><strong>Resolves lineage</strong> - For any schema, walks up the reference chain to find all operations that ultimately use it</li>
<li><strong>Caches results</strong> - Lineage is computed once and cached for efficient template evaluation</li>
</ol>
<p>When a collision occurs and renaming is needed, the joiner:</p>
<ol>
<li>Retrieves the operation lineage for the schema</li>
<li>Selects a primary operation based on the configured policy</li>
<li>Builds a <code>RenameContext</code> with all available operation metadata</li>
<li>Executes the rename template with this rich context</li>
</ol>
<h3 id="renamecontext-reference">RenameContext Reference</h3>
<p>The <code>RenameContext</code> provides comprehensive metadata for rename template evaluation:</p>
<h4 id="core-fields-always-available">Core Fields (Always Available)</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Name</code></td>
<td>string</td>
<td>Original schema name</td>
<td><code>"Response"</code></td>
</tr>
<tr>
<td><code>Source</code></td>
<td>string</td>
<td>Source file name (sanitized, no extension)</td>
<td><code>"orders_service"</code></td>
</tr>
<tr>
<td><code>Index</code></td>
<td>int</td>
<td>Document index (0-based)</td>
<td><code>1</code></td>
</tr>
</tbody>
</table>
<h4 id="operation-context-fields-when-operationcontext-is-true">Operation Context Fields (When <code>OperationContext</code> is true)</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Path</code></td>
<td>string</td>
<td>API path from primary operation</td>
<td><code>"/orders"</code></td>
</tr>
<tr>
<td><code>Method</code></td>
<td>string</td>
<td>HTTP method (lowercase)</td>
<td><code>"get"</code></td>
</tr>
<tr>
<td><code>OperationID</code></td>
<td>string</td>
<td>Operation ID if defined</td>
<td><code>"listOrders"</code></td>
</tr>
<tr>
<td><code>Tags</code></td>
<td>[]string</td>
<td>Tags from primary operation</td>
<td><code>["orders"]</code></td>
</tr>
<tr>
<td><code>UsageType</code></td>
<td>string</td>
<td>Where schema is used</td>
<td><code>"response"</code></td>
</tr>
<tr>
<td><code>StatusCode</code></td>
<td>string</td>
<td>Response status code</td>
<td><code>"200"</code></td>
</tr>
<tr>
<td><code>ParamName</code></td>
<td>string</td>
<td>Parameter name (for parameter usage)</td>
<td><code>"filter"</code></td>
</tr>
<tr>
<td><code>MediaType</code></td>
<td>string</td>
<td>Content media type</td>
<td><code>"application/json"</code></td>
</tr>
<tr>
<td><code>PrimaryResource</code></td>
<td>string</td>
<td>First path segment (resource name)</td>
<td><code>"orders"</code></td>
</tr>
</tbody>
</table>
<h4 id="aggregate-context-fields-multi-operation-schemas">Aggregate Context Fields (Multi-Operation Schemas)</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AllPaths</code></td>
<td>[]string</td>
<td>All paths referencing this schema</td>
<td><code>["/orders", "/orders/{id}"]</code></td>
</tr>
<tr>
<td><code>AllMethods</code></td>
<td>[]string</td>
<td>All HTTP methods (deduplicated)</td>
<td><code>["get", "post"]</code></td>
</tr>
<tr>
<td><code>AllOperationIDs</code></td>
<td>[]string</td>
<td>All operation IDs (non-empty only)</td>
<td><code>["listOrders", "getOrder"]</code></td>
</tr>
<tr>
<td><code>AllTags</code></td>
<td>[]string</td>
<td>All tags (deduplicated, sorted)</td>
<td><code>["admin", "orders"]</code></td>
</tr>
<tr>
<td><code>RefCount</code></td>
<td>int</td>
<td>Total operation references</td>
<td><code>3</code></td>
</tr>
<tr>
<td><code>IsShared</code></td>
<td>bool</td>
<td>True if used by multiple operations</td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<h4 id="usagetype-values">UsageType Values</h4>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"request"</code></td>
<td>Schema used in request body</td>
</tr>
<tr>
<td><code>"response"</code></td>
<td>Schema used in response body</td>
</tr>
<tr>
<td><code>"parameter"</code></td>
<td>Schema used in parameter definition</td>
</tr>
<tr>
<td><code>"header"</code></td>
<td>Schema used in header definition</td>
</tr>
<tr>
<td><code>"callback"</code></td>
<td>Schema used in callback definition</td>
</tr>
</tbody>
</table>
<h3 id="template-functions-reference">Template Functions Reference</h3>
<p>The joiner provides built-in template functions for transforming context values:</p>
<h4 id="path-functions">Path Functions</h4>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Example Input</th>
<th>Example Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pathSegment</code></td>
<td>Extract nth segment (0-indexed, negative from end)</td>
<td><code>pathSegment "/users/{id}/orders" 0</code></td>
<td><code>"users"</code></td>
</tr>
<tr>
<td><code>pathSegment</code></td>
<td>Negative index</td>
<td><code>pathSegment "/users/{id}/orders" -1</code></td>
<td><code>"orders"</code></td>
</tr>
<tr>
<td><code>pathResource</code></td>
<td>First non-parameter segment</td>
<td><code>pathResource "/users/{id}/orders"</code></td>
<td><code>"users"</code></td>
</tr>
<tr>
<td><code>pathLast</code></td>
<td>Last non-parameter segment</td>
<td><code>pathLast "/users/{id}/orders"</code></td>
<td><code>"orders"</code></td>
</tr>
<tr>
<td><code>pathClean</code></td>
<td>Sanitize path for naming</td>
<td><code>pathClean "/users/{id}"</code></td>
<td><code>"users_id"</code></td>
</tr>
</tbody>
</table>
<p>Path functions automatically skip path parameters (segments like <code>{id}</code> or <code>{userId}</code>).</p>
<h4 id="tag-functions">Tag Functions</h4>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Example Input</th>
<th>Example Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>firstTag</code></td>
<td>First tag or empty string</td>
<td><code>firstTag .Tags</code></td>
<td><code>"orders"</code></td>
</tr>
<tr>
<td><code>joinTags</code></td>
<td>Join tags with separator</td>
<td><code>joinTags .Tags "_"</code></td>
<td><code>"admin_orders"</code></td>
</tr>
<tr>
<td><code>hasTag</code></td>
<td>Check if tag exists</td>
<td><code>hasTag .Tags "admin"</code></td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<h4 id="case-functions">Case Functions</h4>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Example Input</th>
<th>Example Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pascalCase</code></td>
<td>PascalCase conversion</td>
<td><code>pascalCase "list_orders"</code></td>
<td><code>"ListOrders"</code></td>
</tr>
<tr>
<td><code>camelCase</code></td>
<td>camelCase conversion</td>
<td><code>camelCase "list_orders"</code></td>
<td><code>"listOrders"</code></td>
</tr>
<tr>
<td><code>snakeCase</code></td>
<td>snake_case conversion</td>
<td><code>snakeCase "ListOrders"</code></td>
<td><code>"list_orders"</code></td>
</tr>
<tr>
<td><code>kebabCase</code></td>
<td>kebab-case conversion</td>
<td><code>kebabCase "ListOrders"</code></td>
<td><code>"list-orders"</code></td>
</tr>
</tbody>
</table>
<p>Case functions handle various input formats: <code>snake_case</code>, <code>kebab-case</code>, <code>camelCase</code>, <code>PascalCase</code>, and space-separated words.</p>
<h4 id="conditional-helpers">Conditional Helpers</h4>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default</code></td>
<td>Return fallback if value empty</td>
<td><code>default .OperationID "Unknown"</code></td>
</tr>
<tr>
<td><code>coalesce</code></td>
<td>First non-empty value</td>
<td><code>coalesce .OperationID .Path .Name</code></td>
</tr>
</tbody>
</table>
<h3 id="primary-operation-policy">Primary Operation Policy</h3>
<p>When a schema is referenced by multiple operations, the joiner must select one as the "primary" operation for template context. Three policies are available:</p>
<table>
<thead>
<tr>
<th>Policy</th>
<th>Behavior</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PolicyFirstEncountered</code></td>
<td>Uses the first operation found during graph traversal</td>
<td>Deterministic results based on document order</td>
</tr>
<tr>
<td><code>PolicyMostSpecific</code></td>
<td>Prefers operations with operationId, then those with tags</td>
<td>Well-documented APIs with operation IDs</td>
</tr>
<tr>
<td><code>PolicyAlphabetical</code></td>
<td>Sorts by path+method, uses alphabetically first</td>
<td>Reproducible builds regardless of traversal order</td>
</tr>
</tbody>
</table>
<p><strong>Example: Policy behavior with a shared schema</strong></p>
<p>Consider an <code>Address</code> schema used by three operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">/users/{id}</span><span class="p p-Indicator">:</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">getUser</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">users</span><span class="p p-Indicator">]</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">  </span><span class="nt">/orders</span><span class="p">:</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="nt">post</span><span class="p">:</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">createOrder</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">orders</span><span class="p p-Indicator">]</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">  </span><span class="nt">/shipping</span><span class="p">:</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">      </span><span class="c1"># No operationId</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">shipping</span><span class="p p-Indicator">]</span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Policy</th>
<th>Selected Operation</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PolicyFirstEncountered</code></td>
<td>GET /users/{id}</td>
<td>First in document order</td>
</tr>
<tr>
<td><code>PolicyMostSpecific</code></td>
<td>GET /users/{id}</td>
<td>Has operationId (both GET /users and POST /orders do, but GET comes first)</td>
</tr>
<tr>
<td><code>PolicyAlphabetical</code></td>
<td>POST /orders</td>
<td>"/orders" + "post" comes before "/shipping" + "get" and "/users/{id}" + "get"</td>
</tr>
</tbody>
</table>
<p>Configure the policy in your joiner config:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">OperationContext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nx">config</span><span class="p">.</span><span class="nx">PrimaryOperationPolicy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">PolicyMostSpecific</span>
</code></pre></div>
<h3 id="example-template-patterns">Example Template Patterns</h3>
<p>Common rename template patterns for different scenarios:</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Template</th>
<th>Example Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>Operation ID prefix</td>
<td><code>{{pascalCase .OperationID}}{{.Name}}</code></td>
<td><code>ListOrdersResponse</code></td>
</tr>
<tr>
<td>Resource-based</td>
<td><code>{{pascalCase (pathResource .Path)}}{{.Name}}</code></td>
<td><code>OrdersResponse</code></td>
</tr>
<tr>
<td>Tag-based</td>
<td><code>{{pascalCase (firstTag .Tags)}}{{.Name}}</code></td>
<td><code>OrdersResponse</code></td>
</tr>
<tr>
<td>Method + resource</td>
<td><code>{{pascalCase .Method}}{{pascalCase (pathResource .Path)}}{{.Name}}</code></td>
<td><code>GetOrdersResponse</code></td>
</tr>
<tr>
<td>Full path</td>
<td><code>{{pascalCase (pathClean .Path)}}{{.Name}}</code></td>
<td><code>OrdersIdResponse</code></td>
</tr>
<tr>
<td>With fallback</td>
<td><code>{{pascalCase (coalesce .OperationID (pathResource .Path) .Source)}}{{.Name}}</code></td>
<td><code>ListOrdersResponse</code></td>
</tr>
<tr>
<td>Versioned API</td>
<td><code>{{.Name}}_{{pathSegment .Path 0}}_{{.Source}}</code></td>
<td><code>Response_v2_orders</code></td>
</tr>
<tr>
<td>Response codes</td>
<td><code>{{pascalCase .OperationID}}{{.StatusCode}}{{.Name}}</code></td>
<td><code>ListOrders200Response</code></td>
</tr>
<tr>
<td>Shared indicator</td>
<td><code>{{if .IsShared}}Shared{{end}}{{.Name}}_{{.Source}}</code></td>
<td><code>SharedResponse_orders</code></td>
</tr>
</tbody>
</table>
<h3 id="handling-shared-schemas">Handling Shared Schemas</h3>
<p>Schemas referenced by multiple operations require special consideration. Use the <code>IsShared</code> field to detect and handle these cases:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1">// Template that indicates shared schemas</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">`{{if .IsShared}}Common{{else}}{{pascalCase .OperationID}}{{end}}{{.Name}}`</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1">// Results:</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1">// - Schema used by one operation: &quot;ListOrdersResponse&quot;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="c1">// - Schema used by multiple operations: &quot;CommonResponse&quot;</span>
</code></pre></div>
<p>For more granular control, use aggregate fields:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">// Use all operation IDs for shared schemas</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">`{{if .IsShared}}{{range $i, $id := .AllOperationIDs}}{{if $i}}_{{end}}{{$id}}{{end}}_{{.Name}}{{else}}{{.OperationID}}_{{.Name}}{{end}}`</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1">// Shared schema used by listOrders and getOrder: &quot;listOrders_getOrder_Response&quot;</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="c1">// Single-use schema: &quot;listOrders_Response&quot;</span>
</code></pre></div>
<h2 id="limitations">Limitations</h2>
<h3 id="operation-context-for-base-document-schemas">Operation Context for Base Document Schemas</h3>
<p>When using <code>WithOperationContext(true)</code>, only schemas from the RIGHT (incoming) documents receive operation-derived context. The LEFT (base) document's schemas do not have their operation references traced.</p>
<p>This means for base document schemas, the following <code>RenameContext</code> fields will be empty:</p>
<ul>
<li><code>Path</code>, <code>Method</code>, <code>OperationID</code>, <code>Tags</code></li>
<li><code>UsageType</code>, <code>StatusCode</code>, <code>ParamName</code>, <code>MediaType</code></li>
<li><code>AllPaths</code>, <code>AllMethods</code>, <code>AllOperationIDs</code>, <code>AllTags</code></li>
<li><code>RefCount</code>, <code>PrimaryResource</code>, <code>IsShared</code></li>
</ul>
<p>Only the core fields (<code>Name</code>, <code>Source</code>, <code>Index</code>) are populated for base document schemas.</p>
<p><strong>Workaround</strong>: If you need operation context for all schemas, consider restructuring your join order so the document with schemas requiring operation context is joined as the RIGHT document.</p>
<h3 id="oas-20-support">OAS 2.0 Support</h3>
<p>Operation-aware renaming works with both OAS 2.0 and OAS 3.x documents. The reference graph construction adapts to each version's structure:</p>
<table>
<thead>
<tr>
<th>OAS Version</th>
<th>Request Body Detection</th>
<th>Schema Reference Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>OAS 2.0</td>
<td>Body parameter with <code>in: body</code></td>
<td><code>#/definitions/SchemaName</code></td>
</tr>
<tr>
<td>OAS 3.x</td>
<td><code>requestBody.content.*.schema</code></td>
<td><code>#/components/schemas/SchemaName</code></td>
</tr>
</tbody>
</table>
<p>For OAS 2.0 documents:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyRenameRight</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nx">config</span><span class="p">.</span><span class="nx">OperationContext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{pascalCase .OperationID}}{{.Name}}&quot;</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="c1">// Works with OAS 2.0 (Swagger) documents</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">    </span><span class="s">&quot;swagger-users.yaml&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// OAS 2.0</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">    </span><span class="s">&quot;swagger-orders.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// OAS 2.0</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="p">})</span>
</code></pre></div>
<h3 id="webhook-support-oas-31">Webhook Support (OAS 3.1+)</h3>
<p>For OAS 3.1+ documents with webhooks, the reference graph includes webhook operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">webhooks</span><span class="p">:</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="nt">orderCreated</span><span class="p">:</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="nt">post</span><span class="p">:</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">handleOrderCreated</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">      </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">webhooks</span><span class="p p-Indicator">]</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">      </span><span class="nt">requestBody</span><span class="p">:</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">        </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">          </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">            </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">              </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/OrderEvent&#39;</span>
</code></pre></div>
<p>The <code>Path</code> field for webhook operations uses the format <code>webhook:&lt;name&gt;</code>:</p>
<table>
<thead>
<tr>
<th>Template</th>
<th>Webhook Path</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{{.Path}}</code></td>
<td>orderCreated webhook</td>
<td><code>webhook:orderCreated</code></td>
</tr>
<tr>
<td><code>{{pathResource .Path}}</code></td>
<td>orderCreated webhook</td>
<td><code>webhook</code></td>
</tr>
</tbody>
</table>
<h3 id="callback-support">Callback Support</h3>
<p>Callbacks in OAS 3.0+ are also tracked in the reference graph. The path includes the parent operation and callback name:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">  </span><span class="nt">/orders</span><span class="p">:</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="nt">post</span><span class="p">:</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">createOrder</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">      </span><span class="nt">callbacks</span><span class="p">:</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">        </span><span class="nt">orderStatus</span><span class="p">:</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">          </span><span class="s">&#39;{$request.body#/callbackUrl}&#39;</span><span class="p p-Indicator">:</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">            </span><span class="nt">post</span><span class="p">:</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">              </span><span class="nt">requestBody</span><span class="p">:</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">                </span><span class="nt">content</span><span class="p">:</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">                  </span><span class="nt">application/json</span><span class="p">:</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">                    </span><span class="nt">schema</span><span class="p">:</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">                      </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/StatusUpdate&#39;</span>
</code></pre></div>
<p>For callback operations, the <code>Path</code> field uses the format <code>&lt;parent_path&gt;-&gt;&lt;callback_name&gt;:&lt;callback_path&gt;</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>/orders-&gt;orderStatus:{$request.body#/callbackUrl}
</code></pre></div>
<p>The <code>UsageType</code> will be <code>"callback"</code> for schemas referenced within callbacks.</p>
<h3 id="debugging-rename-templates">Debugging Rename Templates</h3>
<p>To debug rename templates, use a template that outputs all available fields:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1">// Debug template that shows all context</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">`DEBUG_{{.Name}}_path={{.Path}}_method={{.Method}}_op={{.OperationID}}_usage={{.UsageType}}_shared={{.IsShared}}`</span>
</code></pre></div>
<p>This produces names like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>DEBUG_Response_path=/orders_method=get_op=listOrders_usage=response_shared=false
</code></pre></div>
<p>Once you've identified the available fields, simplify to your production template.</p>
<h3 id="performance-considerations">Performance Considerations</h3>
<p>Building the reference graph adds a traversal pass over the document. For most specifications, this overhead is negligible:</p>
<table>
<thead>
<tr>
<th>Document Size</th>
<th>Typical Overhead</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small (&lt; 50 paths)</td>
<td>&lt; 1ms</td>
</tr>
<tr>
<td>Medium (50-500 paths)</td>
<td>1-5ms</td>
</tr>
<tr>
<td>Large (500+ paths)</td>
<td>5-20ms</td>
</tr>
</tbody>
</table>
<p>The reference graph is built once per document and cached. Lineage resolution is also cached, so multiple schema renames reuse the same graph traversal results.</p>
<p>To minimize overhead when operation context is not needed:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">OperationContext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="w">  </span><span class="c1">// Default - skip graph building</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{.Name}}_{{.Source}}&quot;</span><span class="w">  </span><span class="c1">// Core fields only</span>
</code></pre></div>
<h3 id="integration-with-semantic-deduplication">Integration with Semantic Deduplication</h3>
<p>Operation-aware renaming and semantic deduplication are complementary features:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Purpose</th>
<th>When to Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Semantic Deduplication</strong></td>
<td>Consolidates structurally identical schemas</td>
<td>When schemas are duplicated across services</td>
</tr>
<tr>
<td><strong>Operation-Aware Renaming</strong></td>
<td>Creates meaningful names for colliding schemas</td>
<td>When schemas have the same name but different structures</td>
</tr>
</tbody>
</table>
<p>Use both together for comprehensive schema management:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="c1">// Consolidate identical schemas first</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="nx">config</span><span class="p">.</span><span class="nx">SemanticDeduplication</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="c1">// For remaining collisions (same name, different structure),</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="c1">// use operation-aware renaming</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyRenameRight</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="nx">config</span><span class="p">.</span><span class="nx">OperationContext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{pascalCase .OperationID}}{{.Name}}&quot;</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="nx">config</span><span class="p">.</span><span class="nx">PrimaryOperationPolicy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">PolicyMostSpecific</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">(</span><span class="nx">files</span><span class="p">)</span>
</code></pre></div>
<p>With this configuration:</p>
<ol>
<li>Structurally identical schemas (e.g., <code>Address</code> in users and orders) are consolidated</li>
<li>Structurally different schemas with the same name (e.g., different <code>Response</code> schemas) are renamed with operation context</li>
</ol>
<h3 id="common-pitfalls">Common Pitfalls</h3>
<p><strong>Empty OperationID:</strong> Not all APIs define operation IDs. Use fallbacks:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1">// Bad - empty OperationID produces &quot;Response&quot;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{.OperationID}}{{.Name}}&quot;</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="c1">// Good - falls back to path resource</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{pascalCase (coalesce .OperationID (pathResource .Path) .Source)}}{{.Name}}&quot;</span>
</code></pre></div>
<p><strong>Orphaned Schemas:</strong> Schemas not referenced by any operation will have empty operation context. These typically include:</p>
<ul>
<li>Base schemas used only via <code>allOf</code>/<code>anyOf</code>/<code>oneOf</code></li>
<li>Schemas defined but never referenced</li>
<li>Nested <code>$defs</code> schemas</li>
</ul>
<p>For orphaned schemas, the template receives only core fields (<code>Name</code>, <code>Source</code>, <code>Index</code>). Design templates with fallbacks:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1">// Handles orphaned schemas gracefully</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">`{{if .Path}}{{pascalCase .OperationID}}{{.Name}}{{else}}{{.Name}}_{{.Source}}{{end}}`</span>
</code></pre></div>
<p><strong>Path Parameters in Templates:</strong> Path functions skip parameters, but <code>pathClean</code> converts them:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nx">pathClean</span><span class="p">(</span><span class="s">&quot;/users/{id}&quot;</span><span class="p">)</span><span class="w">       </span><span class="c1">// &quot;users_id&quot; - includes parameter name</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="nx">pathResource</span><span class="p">(</span><span class="s">&quot;/users/{id}&quot;</span><span class="p">)</span><span class="w">    </span><span class="c1">// &quot;users&quot; - excludes parameter</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="nx">pathLast</span><span class="p">(</span><span class="s">&quot;/users/{id}/orders&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// &quot;orders&quot; - excludes parameter</span>
</code></pre></div>
<p><a href="#top">Back to top</a></p>
<h2 id="custom-collision-handlers">Custom Collision Handlers</h2>
<p>While the built-in collision strategies (<code>StrategyAcceptLeft</code>, <code>StrategyRenameRight</code>, etc.) handle most use cases, some scenarios require custom logic. <strong>Collision handlers</strong> provide a callback mechanism for fine-grained collision control.</p>
<h3 id="when-to-use-collision-handlers">When to Use Collision Handlers</h3>
<p>Use collision handlers when you need to:</p>
<ul>
<li><strong>Log all collisions</strong> for audit trails or debugging</li>
<li><strong>Apply conditional logic</strong> - different decisions based on schema names, sources, or content</li>
<li><strong>Implement custom merging</strong> - combine properties from both schemas</li>
<li><strong>Integrate with external systems</strong> - validate decisions against a schema registry</li>
<li><strong>Fail selectively</strong> - reject specific collisions while allowing others</li>
</ul>
<h3 id="basic-usage">Basic Usage</h3>
<p>Register a collision handler using <code>WithCollisionHandler</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="p">)</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithFilePaths</span><span class="p">(</span><span class="s">&quot;base.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;overlay.yaml&quot;</span><span class="p">),</span>
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithSchemaStrategy</span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptLeft</span><span class="p">),</span><span class="w"> </span><span class="c1">// Default strategy</span>
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandler</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">collision</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="w">            </span><span class="c1">// Log all collisions</span>
<a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Collision: %s %s at %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Type</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">JSONPath</span><span class="p">)</span>
<a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>
<a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="w">            </span><span class="c1">// Custom logic: always accept right for &quot;Response&quot; schemas</span>
<a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Response&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">AcceptRightWithMessage</span><span class="p">(</span><span class="s">&quot;Response schemas always use overlay version&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>
<a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a><span class="w">            </span><span class="c1">// Defer to configured strategy for everything else</span>
<a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">ContinueWithStrategy</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a><span class="w">        </span><span class="p">}),</span>
<a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a>
<a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Collisions resolved: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionCount</span><span class="p">)</span>
<a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a><span class="p">}</span>
</code></pre></div>
<h3 id="collisioncontext-reference">CollisionContext Reference</h3>
<p>The handler receives a <code>CollisionContext</code> with complete information about the collision:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Type</code></td>
<td><code>CollisionType</code></td>
<td>What collided: <code>CollisionTypeSchema</code>, <code>CollisionTypePath</code>, etc.</td>
</tr>
<tr>
<td><code>Name</code></td>
<td><code>string</code></td>
<td>The colliding name (e.g., "User", "/pets")</td>
</tr>
<tr>
<td><code>JSONPath</code></td>
<td><code>string</code></td>
<td>Full JSON path (e.g., "$.components.schemas.User")</td>
</tr>
<tr>
<td><code>LeftSource</code></td>
<td><code>string</code></td>
<td>Source file/identifier for the left (base) document</td>
</tr>
<tr>
<td><code>LeftLocation</code></td>
<td><code>*SourceLocation</code></td>
<td>Line/column in left document (nil if unknown)</td>
</tr>
<tr>
<td><code>LeftValue</code></td>
<td><code>any</code></td>
<td>The left component (<code>*parser.Schema</code>, <code>*parser.PathItem</code>, etc.)</td>
</tr>
<tr>
<td><code>RightSource</code></td>
<td><code>string</code></td>
<td>Source file/identifier for the right (incoming) document</td>
</tr>
<tr>
<td><code>RightLocation</code></td>
<td><code>*SourceLocation</code></td>
<td>Line/column in right document (nil if unknown)</td>
</tr>
<tr>
<td><code>RightValue</code></td>
<td><code>any</code></td>
<td>The right component</td>
</tr>
<tr>
<td><code>RenameInfo</code></td>
<td><code>*RenameContext</code></td>
<td>Operation context for rename templates (nil for paths)</td>
</tr>
<tr>
<td><code>ConfiguredStrategy</code></td>
<td><code>CollisionStrategy</code></td>
<td>The strategy that would apply without handler</td>
</tr>
</tbody>
</table>
<h3 id="resolution-actions">Resolution Actions</h3>
<p>Return one of these resolution helpers from your handler:</p>
<table>
<thead>
<tr>
<th>Helper</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ContinueWithStrategy()</code></td>
<td>Defer to the configured strategy (observe-only mode)</td>
</tr>
<tr>
<td><code>AcceptLeft()</code></td>
<td>Keep the left (base) value</td>
</tr>
<tr>
<td><code>AcceptRight()</code></td>
<td>Keep the right (incoming) value</td>
</tr>
<tr>
<td><code>Rename()</code></td>
<td>Rename the right value using the rename template</td>
</tr>
<tr>
<td><code>Deduplicate()</code></td>
<td>Treat colliding values as equivalent (skip the right)</td>
</tr>
<tr>
<td><code>Fail()</code></td>
<td>Abort the join with an error</td>
</tr>
<tr>
<td><code>UseCustomValue(value)</code></td>
<td>Use a custom merged value (schemas only)</td>
</tr>
</tbody>
</table>
<p>All helpers have <code>WithMessage(string)</code> variants for logging:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">AcceptLeftWithMessage</span><span class="p">(</span><span class="s">&quot;Keeping base schema per policy&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
</code></pre></div>
<h3 id="handler-patterns">Handler Patterns</h3>
<h4 id="observe-only-logging">Observe-Only (Logging)</h4>
<p>Log all collisions without affecting behavior:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandler</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">collision</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;[COLLISION] %s: %s (%s vs %s)&quot;</span><span class="p">,</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">        </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Type</span><span class="p">,</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">        </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="p">,</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">        </span><span class="nx">collision</span><span class="p">.</span><span class="nx">LeftSource</span><span class="p">,</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">        </span><span class="nx">collision</span><span class="p">.</span><span class="nx">RightSource</span><span class="p">,</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">ContinueWithStrategy</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="p">})</span>
</code></pre></div>
<h4 id="conditional-decisions">Conditional Decisions</h4>
<p>Apply different resolutions based on collision attributes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandler</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">collision</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="c1">// Fail on path collisions (strict)</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionTypePath</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">FailWithMessage</span><span class="p">(</span><span class="s">&quot;Path collisions not allowed&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">    </span><span class="c1">// Accept right for &quot;Error&quot; schemas (overlay overrides)</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Error&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;ErrorResponse&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">AcceptRight</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">    </span><span class="c1">// Use deduplication for common schemas</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Pagination&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Links&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">Deduplicate</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="w">    </span><span class="c1">// Default to configured strategy</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">ContinueWithStrategy</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="p">})</span>
</code></pre></div>
<h4 id="custom-schema-merging">Custom Schema Merging</h4>
<p>Provide a merged schema that combines properties from both:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandler</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">collision</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Type</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionTypeSchema</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">ContinueWithStrategy</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">    </span><span class="nx">leftSchema</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">LeftValue</span><span class="p">.(</span><span class="o">*</span><span class="nx">parser</span><span class="p">.</span><span class="nx">Schema</span><span class="p">)</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">    </span><span class="nx">rightSchema</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">RightValue</span><span class="p">.(</span><span class="o">*</span><span class="nx">parser</span><span class="p">.</span><span class="nx">Schema</span><span class="p">)</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">    </span><span class="c1">// Create merged schema with properties from both</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="w">    </span><span class="nx">merged</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">parser</span><span class="p">.</span><span class="nx">Schema</span><span class="p">{</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="w">        </span><span class="nx">Type</span><span class="p">:</span><span class="w">        </span><span class="nx">leftSchema</span><span class="p">.</span><span class="nx">Type</span><span class="p">,</span>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="w">        </span><span class="nx">Description</span><span class="p">:</span><span class="w"> </span><span class="nx">rightSchema</span><span class="p">.</span><span class="nx">Description</span><span class="p">,</span><span class="w"> </span><span class="c1">// Prefer right description</span>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="w">        </span><span class="nx">Properties</span><span class="p">:</span><span class="w">  </span><span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">parser</span><span class="p">.</span><span class="nx">Schema</span><span class="p">),</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="w">    </span><span class="c1">// Copy all properties from left</span>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">prop</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">leftSchema</span><span class="p">.</span><span class="nx">Properties</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="w">        </span><span class="nx">merged</span><span class="p">.</span><span class="nx">Properties</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">prop</span>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a>
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a><span class="w">    </span><span class="c1">// Add/override with properties from right</span>
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">prop</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">rightSchema</span><span class="p">.</span><span class="nx">Properties</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a><span class="w">        </span><span class="nx">merged</span><span class="p">.</span><span class="nx">Properties</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">prop</span>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a>
<a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">UseCustomValueWithMessage</span><span class="p">(</span><span class="nx">merged</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Merged properties from both schemas&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a><span class="p">})</span>
</code></pre></div>
<h3 id="type-filtered-handlers">Type-Filtered Handlers</h3>
<p>Use <code>WithCollisionHandlerFor</code> to handle only specific collision types:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1">// Only handle schema collisions - paths use configured strategy</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandlerFor</span><span class="p">(</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">    </span><span class="kd">func</span><span class="p">(</span><span class="nx">collision</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">        </span><span class="c1">// This handler only receives schema collisions</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Schema collision: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">ContinueWithStrategy</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionTypeSchema</span><span class="p">,</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="p">)</span>
</code></pre></div>
<p>Filter for multiple types:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandlerFor</span><span class="p">(</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">    </span><span class="nx">handler</span><span class="p">,</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionTypeSchema</span><span class="p">,</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionTypePath</span><span class="p">,</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="p">)</span>
</code></pre></div>
<h3 id="supported-collision-types">Supported Collision Types</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Custom Value Support</th>
<th>Rename Support</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CollisionTypeSchema</code></td>
<td>Schema in components.schemas (OAS3) or definitions (OAS2)</td>
<td>‚úÖ Yes</td>
<td>‚úÖ Yes</td>
</tr>
<tr>
<td><code>CollisionTypePath</code></td>
<td>Path in paths section</td>
<td>‚ùå No</td>
<td>‚ùå No</td>
</tr>
</tbody>
</table>
<p>Note: <code>Rename()</code> and <code>UseCustomValue()</code> are not supported for path collisions because paths are URL endpoints that cannot be renamed or custom-merged without breaking API contracts. Use <code>AcceptLeft()</code>, <code>AcceptRight()</code>, <code>Deduplicate()</code>, or <code>Fail()</code> for path collisions.</p>
<h3 id="error-handling">Error Handling</h3>
<p>If your handler returns an error, the joiner:</p>
<ol>
<li>Logs a warning with the error message</li>
<li>Falls back to the configured strategy</li>
<li>Continues the join operation</li>
</ol>
<p>This ensures handlers cannot break the join:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandler</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">collision</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="c1">// If validation fails, error triggers fallback to strategy</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">validateCollision</span><span class="p">(</span><span class="nx">collision</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">{},</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">AcceptLeft</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="p">})</span>
</code></pre></div>
<h3 id="warnings">Warnings</h3>
<p>Handler-related events appear in <code>JoinResult.StructuredWarnings</code>:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>When</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WarnHandlerError</code></td>
<td>Handler returned an error (fell back to strategy)</td>
</tr>
<tr>
<td><code>WarnHandlerResolution</code></td>
<td>Handler provided a resolution with a message</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">StructuredWarnings</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">warning</span><span class="p">.</span><span class="nx">Category</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WarnHandlerError</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Handler error at %s: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="p">}</span>
</code></pre></div>
<h3 id="complete-example">Complete Example</h3>
<p>A production-ready handler that implements a schema governance policy:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">    </span><span class="s">&quot;strings&quot;</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/parser&quot;</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="p">)</span>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="c1">// governanceHandler implements organization schema policies</span>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="kd">func</span><span class="w"> </span><span class="nx">governanceHandler</span><span class="p">(</span><span class="nx">collision</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionContext</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionResolution</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a><span class="w">    </span><span class="c1">// Only handle schemas</span>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Type</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">CollisionTypeSchema</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">ContinueWithStrategy</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>
<a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a><span class="w">    </span><span class="nx">name</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span>
<a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a>
<a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a><span class="w">    </span><span class="c1">// Policy 1: Common schemas must be deduplicated</span>
<a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a><span class="w">    </span><span class="nx">commonSchemas</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;Error&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Pagination&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Links&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Meta&quot;</span><span class="p">}</span>
<a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">common</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">commonSchemas</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">common</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DeduplicateWithMessage</span><span class="p">(</span>
<a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a><span class="w">                </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;%s is a common schema - deduplicating&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">),</span>
<a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a><span class="w">            </span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>
<a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a><span class="w">    </span><span class="c1">// Policy 2: Response schemas always come from the service (right)</span>
<a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">HasSuffix</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Response&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">AcceptRightWithMessage</span><span class="p">(</span><span class="s">&quot;Service-specific response schema&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-36-34" name="__codelineno-36-34" href="#__codelineno-36-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-35" name="__codelineno-36-35" href="#__codelineno-36-35"></a>
<a id="__codelineno-36-36" name="__codelineno-36-36" href="#__codelineno-36-36"></a><span class="w">    </span><span class="c1">// Policy 3: Request schemas always come from the base (left)</span>
<a id="__codelineno-36-37" name="__codelineno-36-37" href="#__codelineno-36-37"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">HasSuffix</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Request&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-38" name="__codelineno-36-38" href="#__codelineno-36-38"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">AcceptLeftWithMessage</span><span class="p">(</span><span class="s">&quot;Base request schema takes precedence&quot;</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-36-39" name="__codelineno-36-39" href="#__codelineno-36-39"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-40" name="__codelineno-36-40" href="#__codelineno-36-40"></a>
<a id="__codelineno-36-41" name="__codelineno-36-41" href="#__codelineno-36-41"></a><span class="w">    </span><span class="c1">// Policy 4: Fail on unexpected collisions</span>
<a id="__codelineno-36-42" name="__codelineno-36-42" href="#__codelineno-36-42"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">FailWithMessage</span><span class="p">(</span>
<a id="__codelineno-36-43" name="__codelineno-36-43" href="#__codelineno-36-43"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;Unexpected schema collision: %s - review governance policy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">),</span>
<a id="__codelineno-36-44" name="__codelineno-36-44" href="#__codelineno-36-44"></a><span class="w">    </span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-36-45" name="__codelineno-36-45" href="#__codelineno-36-45"></a><span class="p">}</span>
<a id="__codelineno-36-46" name="__codelineno-36-46" href="#__codelineno-36-46"></a>
<a id="__codelineno-36-47" name="__codelineno-36-47" href="#__codelineno-36-47"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-48" name="__codelineno-36-48" href="#__codelineno-36-48"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-36-49" name="__codelineno-36-49" href="#__codelineno-36-49"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithFilePaths</span><span class="p">(</span>
<a id="__codelineno-36-50" name="__codelineno-36-50" href="#__codelineno-36-50"></a><span class="w">            </span><span class="s">&quot;base-api.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-36-51" name="__codelineno-36-51" href="#__codelineno-36-51"></a><span class="w">            </span><span class="s">&quot;users-service.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-36-52" name="__codelineno-36-52" href="#__codelineno-36-52"></a><span class="w">            </span><span class="s">&quot;orders-service.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-36-53" name="__codelineno-36-53" href="#__codelineno-36-53"></a><span class="w">        </span><span class="p">),</span>
<a id="__codelineno-36-54" name="__codelineno-36-54" href="#__codelineno-36-54"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithSchemaStrategy</span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyFailOnCollision</span><span class="p">),</span>
<a id="__codelineno-36-55" name="__codelineno-36-55" href="#__codelineno-36-55"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithCollisionHandler</span><span class="p">(</span><span class="nx">governanceHandler</span><span class="p">),</span>
<a id="__codelineno-36-56" name="__codelineno-36-56" href="#__codelineno-36-56"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-36-57" name="__codelineno-36-57" href="#__codelineno-36-57"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-58" name="__codelineno-36-58" href="#__codelineno-36-58"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-36-59" name="__codelineno-36-59" href="#__codelineno-36-59"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-60" name="__codelineno-36-60" href="#__codelineno-36-60"></a>
<a id="__codelineno-36-61" name="__codelineno-36-61" href="#__codelineno-36-61"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Join completed with %d collisions resolved\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionCount</span><span class="p">)</span>
<a id="__codelineno-36-62" name="__codelineno-36-62" href="#__codelineno-36-62"></a>
<a id="__codelineno-36-63" name="__codelineno-36-63" href="#__codelineno-36-63"></a><span class="w">    </span><span class="c1">// Review any governance decisions</span>
<a id="__codelineno-36-64" name="__codelineno-36-64" href="#__codelineno-36-64"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">StructuredWarnings</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-65" name="__codelineno-36-65" href="#__codelineno-36-65"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">warning</span><span class="p">.</span><span class="nx">Category</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WarnHandlerResolution</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-66" name="__codelineno-36-66" href="#__codelineno-36-66"></a><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;  Policy applied at %s: %s\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span>
<a id="__codelineno-36-67" name="__codelineno-36-67" href="#__codelineno-36-67"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-36-68" name="__codelineno-36-68" href="#__codelineno-36-68"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-69" name="__codelineno-36-69" href="#__codelineno-36-69"></a><span class="p">}</span>
</code></pre></div>
<p><a href="#top">‚Üë Back to top</a></p>
<h3 id="namespace-prefixes-for-team-based-apis">Namespace Prefixes for Team-Based APIs</h3>
<p>When consolidating APIs from different teams, namespace prefixes prevent collisions while maintaining clarity about schema origins:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="p">)</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptLeft</span>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a>
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="w">    </span><span class="c1">// Map source files to namespace prefixes</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">NamespacePrefix</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a><span class="w">        </span><span class="s">&quot;users-api.yaml&quot;</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;Users&quot;</span><span class="p">,</span>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="w">        </span><span class="s">&quot;billing-api.yaml&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Billing&quot;</span><span class="p">,</span>
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="w">        </span><span class="s">&quot;orders-api.yaml&quot;</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;Orders&quot;</span><span class="p">,</span>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a>
<a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a><span class="w">    </span><span class="c1">// Apply prefix to ALL schemas, not just collisions</span>
<a id="__codelineno-37-22" name="__codelineno-37-22" href="#__codelineno-37-22"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">AlwaysApplyPrefix</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-37-23" name="__codelineno-37-23" href="#__codelineno-37-23"></a>
<a id="__codelineno-37-24" name="__codelineno-37-24" href="#__codelineno-37-24"></a><span class="w">    </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-37-25" name="__codelineno-37-25" href="#__codelineno-37-25"></a>
<a id="__codelineno-37-26" name="__codelineno-37-26" href="#__codelineno-37-26"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-37-27" name="__codelineno-37-27" href="#__codelineno-37-27"></a><span class="w">        </span><span class="s">&quot;users-api.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-37-28" name="__codelineno-37-28" href="#__codelineno-37-28"></a><span class="w">        </span><span class="s">&quot;billing-api.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-37-29" name="__codelineno-37-29" href="#__codelineno-37-29"></a><span class="w">        </span><span class="s">&quot;orders-api.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-37-30" name="__codelineno-37-30" href="#__codelineno-37-30"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-37-31" name="__codelineno-37-31" href="#__codelineno-37-31"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-32" name="__codelineno-37-32" href="#__codelineno-37-32"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-37-33" name="__codelineno-37-33" href="#__codelineno-37-33"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-34" name="__codelineno-37-34" href="#__codelineno-37-34"></a>
<a id="__codelineno-37-35" name="__codelineno-37-35" href="#__codelineno-37-35"></a><span class="w">    </span><span class="c1">// Schemas will be named:</span>
<a id="__codelineno-37-36" name="__codelineno-37-36" href="#__codelineno-37-36"></a><span class="w">    </span><span class="c1">// Users_User, Users_Profile</span>
<a id="__codelineno-37-37" name="__codelineno-37-37" href="#__codelineno-37-37"></a><span class="w">    </span><span class="c1">// Billing_Invoice, Billing_Payment</span>
<a id="__codelineno-37-38" name="__codelineno-37-38" href="#__codelineno-37-38"></a><span class="w">    </span><span class="c1">// Orders_Order, Orders_LineItem</span>
<a id="__codelineno-37-39" name="__codelineno-37-39" href="#__codelineno-37-39"></a>
<a id="__codelineno-37-40" name="__codelineno-37-40" href="#__codelineno-37-40"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Merged with namespace prefixes\n&quot;</span><span class="p">)</span>
<a id="__codelineno-37-41" name="__codelineno-37-41" href="#__codelineno-37-41"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Schema count: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Stats</span><span class="p">.</span><span class="nx">SchemaCount</span><span class="p">)</span>
<a id="__codelineno-37-42" name="__codelineno-37-42" href="#__codelineno-37-42"></a><span class="p">}</span>
</code></pre></div>
<h3 id="semantic-deduplication-across-documents">Semantic Deduplication Across Documents</h3>
<p>When multiple APIs define structurally identical schemas with different names, semantic deduplication consolidates them:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="p">)</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithFilePaths</span><span class="p">(</span>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">            </span><span class="s">&quot;users-api.yaml&quot;</span><span class="p">,</span><span class="w">    </span><span class="c1">// Has Address schema</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">            </span><span class="s">&quot;orders-api.yaml&quot;</span><span class="p">,</span><span class="w">   </span><span class="c1">// Has ShippingAddress schema (identical structure)</span>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="w">            </span><span class="s">&quot;billing-api.yaml&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1">// Has BillingAddress schema (identical structure)</span>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="w">        </span><span class="p">),</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithSemanticDeduplication</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span>
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a>
<a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a><span class="w">    </span><span class="c1">// If Address, ShippingAddress, and BillingAddress are structurally identical,</span>
<a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a><span class="w">    </span><span class="c1">// they&#39;ll be consolidated to &quot;Address&quot; (alphabetically first)</span>
<a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a><span class="w">    </span><span class="c1">// All references are rewritten automatically</span>
<a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a>
<a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Schema count after deduplication: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Stats</span><span class="p">.</span><span class="nx">SchemaCount</span><span class="p">)</span>
<a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Warnings</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;  %s\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="p">)</span>
<a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Example Input Documents:</strong></p>
<p>users-api.yaml:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">    </span><span class="nt">Address</span><span class="p">:</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">        </span><span class="nt">street</span><span class="p">:</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="w">        </span><span class="nt">city</span><span class="p">:</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">        </span><span class="nt">zip</span><span class="p">:</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div>
<p>orders-api.yaml:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">    </span><span class="nt">ShippingAddress</span><span class="p">:</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="w">        </span><span class="nt">street</span><span class="p">:</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">        </span><span class="nt">city</span><span class="p">:</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="w">        </span><span class="nt">zip</span><span class="p">:</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div>
<p><strong>Example Output:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>Schema count after deduplication: 1
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>  semantic deduplication: consolidated 3 duplicate definition(s)
</code></pre></div>
<h4 id="empty-schemas-are-preserved">Empty Schemas Are Preserved</h4>
<p>Empty schemas (those with no structural constraints) are automatically excluded from deduplication, even when they appear structurally identical. This is because empty schemas serve different semantic purposes depending on context:</p>
<ul>
<li><strong>Placeholders</strong> for schemas to be defined later</li>
<li><strong>"Any type" markers</strong> that accept any value</li>
<li><strong>Context-specific wildcards</strong> with meaning derived from their name or position</li>
</ul>
<p>A schema is considered "empty" if it has no type, format, properties, validation rules, or composition keywords. Metadata fields (title, description, example, deprecated) are NOT considered constraints.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1"># users-api.yaml</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">    </span><span class="nt">AnyPayload</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w">           </span><span class="c1"># &quot;Accept any request body&quot;</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w">    </span><span class="nt">User</span><span class="p">:</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="c1"># events-api.yaml</span>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="w">    </span><span class="nt">DynamicData</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w">           </span><span class="c1"># &quot;Event data can be anything&quot;</span>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a><span class="w">    </span><span class="nt">User</span><span class="p">:</span><span class="w">                     </span><span class="c1"># Identical to users-api User</span>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div>
<p>After joining with semantic deduplication enabled:</p>
<ul>
<li><code>AnyPayload</code> and <code>DynamicData</code> are <strong>both preserved</strong> (empty schemas are never consolidated)</li>
<li>The two <code>User</code> schemas are consolidated into one (structurally identical, non-empty)</li>
</ul>
<h3 id="schema-equivalence-detection">Schema Equivalence Detection</h3>
<p>For collision handling with <code>StrategyDeduplicateEquivalent</code>, configure the depth of structural comparison:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="p">)</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="w">    </span><span class="c1">// Use deduplication for same-named schemas</span>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyDeduplicateEquivalent</span>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="w">    </span><span class="c1">// Configure comparison depth:</span>
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="w">    </span><span class="c1">// &quot;none&quot;    - No comparison, always treat as collision</span>
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="w">    </span><span class="c1">// &quot;shallow&quot; - Compare top-level properties only</span>
<a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="w">    </span><span class="c1">// &quot;deep&quot;    - Full recursive structural comparison</span>
<a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">EquivalenceMode</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;deep&quot;</span>
<a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a>
<a id="__codelineno-43-21" name="__codelineno-43-21" href="#__codelineno-43-21"></a><span class="w">    </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-43-22" name="__codelineno-43-22" href="#__codelineno-43-22"></a>
<a id="__codelineno-43-23" name="__codelineno-43-23" href="#__codelineno-43-23"></a><span class="w">    </span><span class="c1">// If both files have User schema with identical structure,</span>
<a id="__codelineno-43-24" name="__codelineno-43-24" href="#__codelineno-43-24"></a><span class="w">    </span><span class="c1">// they&#39;ll be merged without error</span>
<a id="__codelineno-43-25" name="__codelineno-43-25" href="#__codelineno-43-25"></a><span class="w">    </span><span class="c1">// If structures differ, join fails with collision error</span>
<a id="__codelineno-43-26" name="__codelineno-43-26" href="#__codelineno-43-26"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;api1.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;api2.yaml&quot;</span><span class="p">})</span>
<a id="__codelineno-43-27" name="__codelineno-43-27" href="#__codelineno-43-27"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-28" name="__codelineno-43-28" href="#__codelineno-43-28"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-43-29" name="__codelineno-43-29" href="#__codelineno-43-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-43-30" name="__codelineno-43-30" href="#__codelineno-43-30"></a>
<a id="__codelineno-43-31" name="__codelineno-43-31" href="#__codelineno-43-31"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Merged successfully, %d collisions resolved&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionCount</span><span class="p">)</span>
<a id="__codelineno-43-32" name="__codelineno-43-32" href="#__codelineno-43-32"></a><span class="p">}</span>
</code></pre></div>
<h3 id="high-performance-joining-with-pre-parsed-documents">High-Performance Joining with Pre-Parsed Documents</h3>
<p>For integration with other oastools packages, use pre-parsed documents for 154x faster performance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="w">    </span><span class="s">&quot;time&quot;</span>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/parser&quot;</span>
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/validator&quot;</span>
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="p">)</span>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="w">    </span><span class="c1">// Parse and validate documents</span>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a><span class="w">    </span><span class="nx">files</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;api1.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;api2.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;api3.yaml&quot;</span><span class="p">}</span>
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">parsed</span><span class="w"> </span><span class="p">[]</span><span class="nx">parser</span><span class="p">.</span><span class="nx">ParseResult</span>
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">files</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a><span class="w">        </span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">parser</span><span class="p">.</span><span class="nx">ParseWithOptions</span><span class="p">(</span>
<a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a><span class="w">            </span><span class="nx">parser</span><span class="p">.</span><span class="nx">WithFilePath</span><span class="p">(</span><span class="nx">file</span><span class="p">),</span>
<a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a><span class="w">            </span><span class="nx">parser</span><span class="p">.</span><span class="nx">WithValidateStructure</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span>
<a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a><span class="w">        </span><span class="p">)</span>
<a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;Failed to parse %s: %v&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-44-26" name="__codelineno-44-26" href="#__codelineno-44-26"></a>
<a id="__codelineno-44-27" name="__codelineno-44-27" href="#__codelineno-44-27"></a><span class="w">        </span><span class="c1">// Validate before joining (required)</span>
<a id="__codelineno-44-28" name="__codelineno-44-28" href="#__codelineno-44-28"></a><span class="w">        </span><span class="nx">v</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">validator</span><span class="p">.</span><span class="nx">ValidateWithOptions</span><span class="p">(</span>
<a id="__codelineno-44-29" name="__codelineno-44-29" href="#__codelineno-44-29"></a><span class="w">            </span><span class="nx">validator</span><span class="p">.</span><span class="nx">WithParsed</span><span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">),</span>
<a id="__codelineno-44-30" name="__codelineno-44-30" href="#__codelineno-44-30"></a><span class="w">        </span><span class="p">)</span>
<a id="__codelineno-44-31" name="__codelineno-44-31" href="#__codelineno-44-31"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-32" name="__codelineno-44-32" href="#__codelineno-44-32"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;Failed to validate %s: %v&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-44-33" name="__codelineno-44-33" href="#__codelineno-44-33"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-44-34" name="__codelineno-44-34" href="#__codelineno-44-34"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">v</span><span class="p">.</span><span class="nx">Valid</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-35" name="__codelineno-44-35" href="#__codelineno-44-35"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">&quot;%s has validation errors&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">file</span><span class="p">)</span>
<a id="__codelineno-44-36" name="__codelineno-44-36" href="#__codelineno-44-36"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-44-37" name="__codelineno-44-37" href="#__codelineno-44-37"></a>
<a id="__codelineno-44-38" name="__codelineno-44-38" href="#__codelineno-44-38"></a><span class="w">        </span><span class="nx">parsed</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">parsed</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">p</span><span class="p">)</span>
<a id="__codelineno-44-39" name="__codelineno-44-39" href="#__codelineno-44-39"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-40" name="__codelineno-44-40" href="#__codelineno-44-40"></a>
<a id="__codelineno-44-41" name="__codelineno-44-41" href="#__codelineno-44-41"></a><span class="w">    </span><span class="c1">// Join using pre-parsed documents (154x faster)</span>
<a id="__codelineno-44-42" name="__codelineno-44-42" href="#__codelineno-44-42"></a><span class="w">    </span><span class="nx">start</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span>
<a id="__codelineno-44-43" name="__codelineno-44-43" href="#__codelineno-44-43"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-44-44" name="__codelineno-44-44" href="#__codelineno-44-44"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithParsed</span><span class="p">(</span><span class="nx">parsed</span><span class="o">...</span><span class="p">),</span>
<a id="__codelineno-44-45" name="__codelineno-44-45" href="#__codelineno-44-45"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithSchemaStrategy</span><span class="p">(</span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptLeft</span><span class="p">),</span>
<a id="__codelineno-44-46" name="__codelineno-44-46" href="#__codelineno-44-46"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-44-47" name="__codelineno-44-47" href="#__codelineno-44-47"></a><span class="w">    </span><span class="nx">elapsed</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Since</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span>
<a id="__codelineno-44-48" name="__codelineno-44-48" href="#__codelineno-44-48"></a>
<a id="__codelineno-44-49" name="__codelineno-44-49" href="#__codelineno-44-49"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-50" name="__codelineno-44-50" href="#__codelineno-44-50"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-44-51" name="__codelineno-44-51" href="#__codelineno-44-51"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-52" name="__codelineno-44-52" href="#__codelineno-44-52"></a>
<a id="__codelineno-44-53" name="__codelineno-44-53" href="#__codelineno-44-53"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Join completed in %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">elapsed</span><span class="p">)</span>
<a id="__codelineno-44-54" name="__codelineno-44-54" href="#__codelineno-44-54"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Paths: %d, Schemas: %d\n&quot;</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-44-55" name="__codelineno-44-55" href="#__codelineno-44-55"></a><span class="w">        </span><span class="nx">result</span><span class="p">.</span><span class="nx">Stats</span><span class="p">.</span><span class="nx">PathCount</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Stats</span><span class="p">.</span><span class="nx">SchemaCount</span><span class="p">)</span>
<a id="__codelineno-44-56" name="__codelineno-44-56" href="#__codelineno-44-56"></a><span class="p">}</span>
</code></pre></div>
<h3 id="collision-report-generation">Collision Report Generation</h3>
<p>For debugging complex merges, enable collision reporting:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="p">)</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptLeft</span>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">CollisionReport</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="c1">// Enable detailed reporting</span>
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="w">    </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a><span class="w">        </span><span class="s">&quot;api1.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a><span class="w">        </span><span class="s">&quot;api2.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a><span class="w">        </span><span class="s">&quot;api3.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a><span class="w">    </span><span class="p">})</span>
<a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a>
<a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionDetails</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-27" name="__codelineno-45-27" href="#__codelineno-45-27"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Collision Report:\n&quot;</span><span class="p">)</span>
<a id="__codelineno-45-28" name="__codelineno-45-28" href="#__codelineno-45-28"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;  Total collisions: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionDetails</span><span class="p">.</span><span class="nx">TotalCount</span><span class="p">)</span>
<a id="__codelineno-45-29" name="__codelineno-45-29" href="#__codelineno-45-29"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;  Schema collisions: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionDetails</span><span class="p">.</span><span class="nx">SchemaCount</span><span class="p">)</span>
<a id="__codelineno-45-30" name="__codelineno-45-30" href="#__codelineno-45-30"></a><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;  Path collisions: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionDetails</span><span class="p">.</span><span class="nx">PathCount</span><span class="p">)</span>
<a id="__codelineno-45-31" name="__codelineno-45-31" href="#__codelineno-45-31"></a>
<a id="__codelineno-45-32" name="__codelineno-45-32" href="#__codelineno-45-32"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">CollisionDetails</span><span class="p">.</span><span class="nx">Collisions</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-33" name="__codelineno-45-33" href="#__codelineno-45-33"></a><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;\n  %s collision: %s\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Type</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
<a id="__codelineno-45-34" name="__codelineno-45-34" href="#__codelineno-45-34"></a><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;    Sources: %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Sources</span><span class="p">)</span>
<a id="__codelineno-45-35" name="__codelineno-45-35" href="#__codelineno-45-35"></a><span class="w">            </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;    Resolution: %s\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">collision</span><span class="p">.</span><span class="nx">Resolution</span><span class="p">)</span>
<a id="__codelineno-45-36" name="__codelineno-45-36" href="#__codelineno-45-36"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-45-37" name="__codelineno-45-37" href="#__codelineno-45-37"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-45-38" name="__codelineno-45-38" href="#__codelineno-45-38"></a><span class="p">}</span>
</code></pre></div>
<h3 id="overlay-integration-during-join">Overlay Integration During Join</h3>
<p>Apply transformations during the join process:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="p">)</span>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithFilePaths</span><span class="p">(</span><span class="s">&quot;api1.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;api2.yaml&quot;</span><span class="p">),</span>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="w">        </span><span class="c1">// Apply overlay to each input before merging</span>
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithPreJoinOverlayFile</span><span class="p">(</span><span class="s">&quot;normalize.yaml&quot;</span><span class="p">),</span>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">        </span><span class="c1">// Apply overlay to final result</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">        </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithPostJoinOverlayFile</span><span class="p">(</span><span class="s">&quot;enhance.yaml&quot;</span><span class="p">),</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Join with overlays completed: %d paths&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Stats</span><span class="p">.</span><span class="nx">PathCount</span><span class="p">)</span>
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Example Pre-Join Overlay (normalize.yaml):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nt">overlay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Normalization Overlay</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="nt">actions</span><span class="p">:</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$.paths.*.*.responses.*.description</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">    </span><span class="nt">update</span><span class="p">:</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standardized response</span>
</code></pre></div>
<h3 id="different-strategies-per-component-type">Different Strategies per Component Type</h3>
<p>Fine-grained control over collision handling for different specification elements:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">    </span><span class="s">&quot;log&quot;</span>
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="w">    </span><span class="s">&quot;github.com/erraggy/oastools/joiner&quot;</span>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="p">)</span>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a><span class="w">    </span><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinerConfig</span><span class="p">{</span>
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="w">        </span><span class="c1">// Fail on path collisions - paths must be unique</span>
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a><span class="w">        </span><span class="nx">PathStrategy</span><span class="p">:</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyFailOnCollision</span><span class="p">,</span>
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a>
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a><span class="w">        </span><span class="c1">// For schemas, rename collisions from the right document</span>
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="w">        </span><span class="nx">SchemaStrategy</span><span class="p">:</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyRenameRight</span><span class="p">,</span>
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="w">        </span><span class="nx">RenameTemplate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{.Name}}_v{{.Index}}&quot;</span><span class="p">,</span>
<a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>
<a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a><span class="w">        </span><span class="c1">// For other components (parameters, responses), keep left</span>
<a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a><span class="w">        </span><span class="nx">ComponentStrategy</span><span class="p">:</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptLeft</span><span class="p">,</span>
<a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a>
<a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a><span class="w">        </span><span class="c1">// Merge arrays (servers, security requirements)</span>
<a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a><span class="w">        </span><span class="nx">MergeArrays</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a>
<a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a><span class="w">        </span><span class="c1">// Remove duplicate tags by name</span>
<a id="__codelineno-48-26" name="__codelineno-48-26" href="#__codelineno-48-26"></a><span class="w">        </span><span class="nx">DeduplicateTags</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<a id="__codelineno-48-27" name="__codelineno-48-27" href="#__codelineno-48-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-48-28" name="__codelineno-48-28" href="#__codelineno-48-28"></a>
<a id="__codelineno-48-29" name="__codelineno-48-29" href="#__codelineno-48-29"></a><span class="w">    </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-48-30" name="__codelineno-48-30" href="#__codelineno-48-30"></a>
<a id="__codelineno-48-31" name="__codelineno-48-31" href="#__codelineno-48-31"></a><span class="w">    </span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;base.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;extension.yaml&quot;</span><span class="p">})</span>
<a id="__codelineno-48-32" name="__codelineno-48-32" href="#__codelineno-48-32"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-33" name="__codelineno-48-33" href="#__codelineno-48-33"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-48-34" name="__codelineno-48-34" href="#__codelineno-48-34"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-48-35" name="__codelineno-48-35" href="#__codelineno-48-35"></a>
<a id="__codelineno-48-36" name="__codelineno-48-36" href="#__codelineno-48-36"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Merged with custom strategies\n&quot;</span><span class="p">)</span>
<a id="__codelineno-48-37" name="__codelineno-48-37" href="#__codelineno-48-37"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Warnings: %d\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">Warnings</span><span class="p">))</span>
<a id="__codelineno-48-38" name="__codelineno-48-38" href="#__codelineno-48-38"></a><span class="p">}</span>
</code></pre></div>
<p><a href="#top">‚Üë Back to top</a></p>
<h2 id="configuration-reference">Configuration Reference</h2>
<h3 id="joinerconfig-fields">JoinerConfig Fields</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="kd">type</span><span class="w"> </span><span class="nx">JoinerConfig</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">    </span><span class="c1">// Global default strategy for all collisions</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="w">    </span><span class="nx">DefaultStrategy</span><span class="w"> </span><span class="nx">CollisionStrategy</span>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="w">    </span><span class="c1">// Per-component type strategies (override DefaultStrategy)</span>
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="w">    </span><span class="nx">PathStrategy</span><span class="w">      </span><span class="nx">CollisionStrategy</span>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="w">    </span><span class="nx">SchemaStrategy</span><span class="w">    </span><span class="nx">CollisionStrategy</span>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="w">    </span><span class="nx">ComponentStrategy</span><span class="w"> </span><span class="nx">CollisionStrategy</span>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a><span class="w">    </span><span class="c1">// Tag and array handling</span>
<a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a><span class="w">    </span><span class="nx">DeduplicateTags</span><span class="w"> </span><span class="kt">bool</span><span class="w">  </span><span class="c1">// Remove duplicate tags by name</span>
<a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a><span class="w">    </span><span class="nx">MergeArrays</span><span class="w">     </span><span class="kt">bool</span><span class="w">  </span><span class="c1">// Merge servers, security, tags arrays</span>
<a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a>
<a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a><span class="w">    </span><span class="c1">// Rename strategy configuration</span>
<a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a><span class="w">    </span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="kt">string</span><span class="w">              </span><span class="c1">// Go template: &quot;{{.Name}}_{{.Source}}&quot;</span>
<a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a><span class="w">    </span><span class="nx">NamespacePrefix</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="w">  </span><span class="c1">// Source file ‚Üí prefix mapping</span>
<a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a><span class="w">    </span><span class="nx">AlwaysApplyPrefix</span><span class="w"> </span><span class="kt">bool</span><span class="w">             </span><span class="c1">// Apply prefix to all schemas, not just collisions</span>
<a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a>
<a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a><span class="w">    </span><span class="c1">// Equivalence detection configuration</span>
<a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a><span class="w">    </span><span class="nx">EquivalenceMode</span><span class="w"> </span><span class="kt">string</span><span class="w">  </span><span class="c1">// &quot;none&quot;, &quot;shallow&quot;, or &quot;deep&quot;</span>
<a id="__codelineno-49-21" name="__codelineno-49-21" href="#__codelineno-49-21"></a>
<a id="__codelineno-49-22" name="__codelineno-49-22" href="#__codelineno-49-22"></a><span class="w">    </span><span class="c1">// Reporting</span>
<a id="__codelineno-49-23" name="__codelineno-49-23" href="#__codelineno-49-23"></a><span class="w">    </span><span class="nx">CollisionReport</span><span class="w"> </span><span class="kt">bool</span><span class="w">  </span><span class="c1">// Generate detailed collision analysis</span>
<a id="__codelineno-49-24" name="__codelineno-49-24" href="#__codelineno-49-24"></a>
<a id="__codelineno-49-25" name="__codelineno-49-25" href="#__codelineno-49-25"></a><span class="w">    </span><span class="c1">// Post-processing</span>
<a id="__codelineno-49-26" name="__codelineno-49-26" href="#__codelineno-49-26"></a><span class="w">    </span><span class="nx">SemanticDeduplication</span><span class="w"> </span><span class="kt">bool</span><span class="w">  </span><span class="c1">// Consolidate identical schemas across documents</span>
<a id="__codelineno-49-27" name="__codelineno-49-27" href="#__codelineno-49-27"></a><span class="p">}</span>
</code></pre></div>
<h3 id="available-options">Available Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WithFilePaths(paths ...string)</code></td>
<td>Input file paths or URLs</td>
</tr>
<tr>
<td><code>WithParsed(docs ...ParseResult)</code></td>
<td>Pre-parsed documents (154x faster)</td>
</tr>
<tr>
<td><code>WithConfig(JoinerConfig)</code></td>
<td>Full configuration object</td>
</tr>
<tr>
<td><code>WithPathStrategy(CollisionStrategy)</code></td>
<td>Strategy for path collisions</td>
</tr>
<tr>
<td><code>WithSchemaStrategy(CollisionStrategy)</code></td>
<td>Strategy for schema collisions</td>
</tr>
<tr>
<td><code>WithComponentStrategy(CollisionStrategy)</code></td>
<td>Strategy for other components</td>
</tr>
<tr>
<td><code>WithSemanticDeduplication(bool)</code></td>
<td>Enable cross-document deduplication</td>
</tr>
<tr>
<td><code>WithCollisionHandler(handler)</code></td>
<td>Register collision handler callback</td>
</tr>
<tr>
<td><code>WithCollisionHandlerFor(handler, types...)</code></td>
<td>Register handler for specific collision types</td>
</tr>
<tr>
<td><code>WithPreJoinOverlayFile(string)</code></td>
<td>Overlay applied to each input</td>
</tr>
<tr>
<td><code>WithPostJoinOverlayFile(string)</code></td>
<td>Overlay applied to merged result</td>
</tr>
<tr>
<td><code>WithCollisionReport(bool)</code></td>
<td>Enable detailed collision analysis in result</td>
</tr>
</tbody>
</table>
<p><a href="#top">‚Üë Back to top</a></p>
<h2 id="joinresult-structure">JoinResult Structure</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="kd">type</span><span class="w"> </span><span class="nx">JoinResult</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">    </span><span class="c1">// Document contains the merged document</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">    </span><span class="c1">// (*parser.OAS2Document or *parser.OAS3Document)</span>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="w">    </span><span class="nx">Document</span><span class="w"> </span><span class="kt">any</span>
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="w">    </span><span class="c1">// Version is the OpenAPI version string (e.g., &quot;3.0.3&quot;)</span>
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="w">    </span><span class="nx">Version</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a>
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="w">    </span><span class="c1">// OASVersion is the enumerated version</span>
<a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="w">    </span><span class="nx">OASVersion</span><span class="w"> </span><span class="nx">parser</span><span class="p">.</span><span class="nx">OASVersion</span>
<a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>
<a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="w">    </span><span class="c1">// SourceFormat is the format of the first source file</span>
<a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a><span class="w">    </span><span class="nx">SourceFormat</span><span class="w"> </span><span class="nx">parser</span><span class="p">.</span><span class="nx">SourceFormat</span>
<a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a>
<a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="w">    </span><span class="c1">// Warnings contains non-fatal issues encountered</span>
<a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a><span class="w">    </span><span class="nx">Warnings</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span>
<a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a>
<a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a><span class="w">    </span><span class="c1">// CollisionCount tracks resolved collisions</span>
<a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a><span class="w">    </span><span class="nx">CollisionCount</span><span class="w"> </span><span class="kt">int</span>
<a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a>
<a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a><span class="w">    </span><span class="c1">// Stats contains document statistics</span>
<a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a><span class="w">    </span><span class="nx">Stats</span><span class="w"> </span><span class="nx">parser</span><span class="p">.</span><span class="nx">DocumentStats</span>
<a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a>
<a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a><span class="w">    </span><span class="c1">// CollisionDetails contains detailed analysis</span>
<a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a><span class="w">    </span><span class="c1">// (when CollisionReport is enabled)</span>
<a id="__codelineno-50-26" name="__codelineno-50-26" href="#__codelineno-50-26"></a><span class="w">    </span><span class="nx">CollisionDetails</span><span class="w"> </span><span class="o">*</span><span class="nx">CollisionReport</span>
<a id="__codelineno-50-27" name="__codelineno-50-27" href="#__codelineno-50-27"></a><span class="p">}</span>
</code></pre></div>
<h3 id="joinresult-methods">JoinResult Methods</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ToParseResult()</code></td>
<td><code>*parser.ParseResult</code></td>
<td>Converts result for package chaining</td>
</tr>
</tbody>
</table>
<p><a href="#top">‚Üë Back to top</a></p>
<h2 id="source-map-integration">Source Map Integration</h2>
<p>Source maps enable <strong>precise collision and warning locations</strong> by tracking line and column numbers from your YAML/JSON source files. Without source maps, collision errors only show JSON paths. With source maps, collision errors include file:line:column positions that IDEs can click to jump directly to the conflict.</p>
<p><strong>Without source maps:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>schema collision: &#39;User&#39; defined in users-api.yaml (components.schemas.User) and orders-api.yaml (components.schemas.User)
</code></pre></div>
<p><strong>With source maps:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>schema collision: &#39;User&#39; defined in users-api.yaml:45:5 and orders-api.yaml:62:5
</code></pre></div>
<p>When joining multiple files, use <code>WithSourceMaps</code> (plural) to pass source maps for all input documents:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nx">sourceMaps</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">parser</span><span class="p">.</span><span class="nx">SourceMap</span><span class="p">)</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="kd">var</span><span class="w"> </span><span class="nx">docs</span><span class="w"> </span><span class="p">[]</span><span class="nx">parser</span><span class="p">.</span><span class="nx">ParseResult</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;users-api.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;orders-api.yaml&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="w">    </span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">parser</span><span class="p">.</span><span class="nx">ParseWithOptions</span><span class="p">(</span>
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="w">        </span><span class="nx">parser</span><span class="p">.</span><span class="nx">WithFilePath</span><span class="p">(</span><span class="nx">path</span><span class="p">),</span>
<a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="w">        </span><span class="nx">parser</span><span class="p">.</span><span class="nx">WithSourceMap</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span><span class="w">  </span><span class="c1">// Enable line tracking during parse</span>
<a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="w">    </span><span class="p">)</span>
<a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="w">    </span><span class="nx">sourceMaps</span><span class="p">[</span><span class="nx">path</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">SourceMap</span>
<a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a><span class="w">    </span><span class="nx">docs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">docs</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">p</span><span class="p">)</span>
<a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="p">}</span>
<a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a>
<a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithParsed</span><span class="p">(</span><span class="nx">docs</span><span class="o">...</span><span class="p">),</span>
<a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithSourceMaps</span><span class="p">(</span><span class="nx">sourceMaps</span><span class="p">),</span><span class="w">  </span><span class="c1">// Pass all source maps (keyed by file path)</span>
<a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a><span class="p">)</span>
<a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a>
<a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a><span class="c1">// Warnings and collision details now include line/column/file info</span>
<a id="__codelineno-53-19" name="__codelineno-53-19" href="#__codelineno-53-19"></a><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">warning</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">Warnings</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-20" name="__codelineno-53-20" href="#__codelineno-53-20"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">warning</span><span class="p">)</span><span class="w">  </span><span class="c1">// Includes file:line:column when available</span>
<a id="__codelineno-53-21" name="__codelineno-53-21" href="#__codelineno-53-21"></a><span class="p">}</span>
</code></pre></div>
<p>The joiner uses <code>WithSourceMaps</code> (plural, with a map) because it needs source maps from multiple input files to track collision locations across documents.</p>
<p><a href="#top">Back to top</a></p>
<h2 id="package-chaining">Package Chaining</h2>
<p>The <code>ToParseResult()</code> method enables seamless chaining with other oastools packages by converting <code>JoinResult</code> to a <code>parser.ParseResult</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="c1">// Join then validate</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="nx">joinResult</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">JoinWithOptions</span><span class="p">(</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">    </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">WithFilePaths</span><span class="p">(</span><span class="s">&quot;users-api.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;orders-api.yaml&quot;</span><span class="p">),</span>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="p">)</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="p">}</span>
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a>
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="c1">// Chain to validator</span>
<a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="nx">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">validator</span><span class="p">.</span><span class="nx">New</span><span class="p">()</span>
<a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="nx">valResult</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">v</span><span class="p">.</span><span class="nx">ValidateParsed</span><span class="p">(</span><span class="o">*</span><span class="nx">joinResult</span><span class="p">.</span><span class="nx">ToParseResult</span><span class="p">())</span>
<a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Valid: %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">valResult</span><span class="p">.</span><span class="nx">Valid</span><span class="p">)</span>
<a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a>
<a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="c1">// Or chain to converter</span>
<a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="nx">c</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">converter</span><span class="p">.</span><span class="nx">New</span><span class="p">()</span>
<a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a><span class="nx">convResult</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">ConvertParsed</span><span class="p">(</span><span class="o">*</span><span class="nx">joinResult</span><span class="p">.</span><span class="nx">ToParseResult</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;3.1.0&quot;</span><span class="p">)</span>
<a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a>
<a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a><span class="c1">// Or chain to fixer</span>
<a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a><span class="nx">fixResult</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">fixer</span><span class="p">.</span><span class="nx">FixWithOptions</span><span class="p">(</span>
<a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="w">    </span><span class="nx">fixer</span><span class="p">.</span><span class="nx">WithParsed</span><span class="p">(</span><span class="o">*</span><span class="nx">joinResult</span><span class="p">.</span><span class="nx">ToParseResult</span><span class="p">()),</span>
<a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a><span class="p">)</span>
</code></pre></div>
<p>This enables workflows like: <code>parse ‚Üí join ‚Üí validate ‚Üí convert ‚Üí diff</code></p>
<p>Note: Join warnings are converted to string warnings in the resulting ParseResult.</p>
<p><a href="#top">Back to top</a></p>
<h2 id="best-practices">Best Practices</h2>
<p><strong>Always validate input documents before joining.</strong> The joiner requires documents with no validation errors. Use the validator package first.</p>
<p><strong>Use StrategyFailOnCollision initially</strong> to understand what collisions exist in your documents before choosing a resolution strategy.</p>
<p><strong>Choose collision strategies based on your use case:</strong></p>
<ul>
<li><strong>Fail strategies</strong> for strict merging where collisions indicate problems</li>
<li><strong>Accept strategies</strong> when you have a clear "primary" document</li>
<li><strong>Rename strategies</strong> when you need to preserve both versions</li>
<li><strong>Deduplicate strategies</strong> when schemas should be consolidated</li>
</ul>
<p><strong>Use namespace prefixes for team-based consolidation</strong> to maintain clarity about schema origins in large merged documents.</p>
<p><strong>Enable semantic deduplication</strong> when consolidating APIs that likely share common schemas (addresses, pagination, error responses).</p>
<p><strong>Use the parse-once pattern</strong> when integrating with validation or other processing for 154x performance improvement.</p>
<p><strong>Use collision handlers</strong> when you need conditional logic, audit logging, or custom schema merging beyond what built-in strategies provide. Start with observe-only handlers (<code>ContinueWithStrategy()</code>) to understand collision patterns before implementing custom resolution logic.</p>
<p><a href="#top">‚Üë Back to top</a></p>
<h2 id="common-patterns">Common Patterns</h2>
<h3 id="microservices-consolidation">Microservices Consolidation</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="c1">// Collect all service specs</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="nx">services</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="w">    </span><span class="s">&quot;auth-service/openapi.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">    </span><span class="s">&quot;user-service/openapi.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="w">    </span><span class="s">&quot;order-service/openapi.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">    </span><span class="s">&quot;payment-service/openapi.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="p">}</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="nx">config</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">DefaultConfig</span><span class="p">()</span>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="nx">config</span><span class="p">.</span><span class="nx">PathStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyFailOnCollision</span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyRenameRight</span>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a><span class="nx">config</span><span class="p">.</span><span class="nx">RenameTemplate</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{{.Name}}_{{.Source}}&quot;</span>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a><span class="nx">config</span><span class="p">.</span><span class="nx">SemanticDeduplication</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">(</span><span class="nx">services</span><span class="p">)</span>
</code></pre></div>
<h3 id="api-gateway-aggregation">API Gateway Aggregation</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="c1">// Prefix schemas by team for gateway configuration</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">NamespacePrefix</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">    </span><span class="s">&quot;team-a/api.yaml&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TeamA&quot;</span><span class="p">,</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="w">    </span><span class="s">&quot;team-b/api.yaml&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TeamB&quot;</span><span class="p">,</span>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">    </span><span class="s">&quot;team-c/api.yaml&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TeamC&quot;</span><span class="p">,</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="p">}</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="nx">config</span><span class="p">.</span><span class="nx">AlwaysApplyPrefix</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
<h3 id="extension-document-pattern">Extension Document Pattern</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c1">// Base API with extensions</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="nx">config</span><span class="p">.</span><span class="nx">PathStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptRight</span><span class="w">  </span><span class="c1">// Extensions override base</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="nx">config</span><span class="p">.</span><span class="nx">SchemaStrategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">joiner</span><span class="p">.</span><span class="nx">StrategyAcceptLeft</span><span class="w">  </span><span class="c1">// Base schemas take priority</span>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">j</span><span class="p">.</span><span class="nx">Join</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">    </span><span class="s">&quot;base-api.yaml&quot;</span><span class="p">,</span><span class="w">       </span><span class="c1">// Core API</span>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="w">    </span><span class="s">&quot;custom-extension.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Customer-specific additions</span>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="p">})</span>
</code></pre></div>
<hr />
<h2 id="cli-usage">CLI Usage</h2>
<p>The joiner's operation-aware schema renaming and overlay integration features are fully accessible from the command line.</p>
<h3 id="basic-schema-renaming">Basic Schema Renaming</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="c1"># Rename colliding schemas with source file suffix</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{.Name}}_{{.Source}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>users-api.yaml<span class="w"> </span>orders-api.yaml
</code></pre></div>
<h3 id="operation-aware-renaming">Operation-Aware Renaming</h3>
<p>Enable <code>--operation-context</code> to access path, method, operation ID, and tag information in templates:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="c1"># Use operation ID as prefix (e.g., &quot;ListUsersResponse&quot;)</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{.OperationID | pascalCase}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="c1"># Use path resource as prefix (e.g., &quot;OrdersResponse&quot;)</span>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{pathResource .Path | pascalCase}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="c1"># Full method + resource naming (e.g., &quot;GetOrdersResponse&quot;)</span>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{.Method | pascalCase}}{{pathResource .Path | pascalCase}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
</code></pre></div>
<h3 id="primary-operation-policy_1">Primary Operation Policy</h3>
<p>Control which operation provides context when a schema is used by multiple operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="c1"># Prefer operations with operationId defined</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">  </span>--primary-operation-policy<span class="w"> </span>most-specific<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{.OperationID | default .Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="c1"># Alphabetical for reproducible builds</span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">  </span>--primary-operation-policy<span class="w"> </span>alphabetical<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{.OperationID | pascalCase}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
</code></pre></div>
<h3 id="template-patterns">Template Patterns</h3>
<p>Common template patterns for different use cases:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="c1"># With fallback for schemas without operationId</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{coalesce .OperationID (pathResource .Path) .Source | pascalCase}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="c1"># Different handling for shared vs single-use schemas</span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{if .IsShared}}Shared{{else}}{{.OperationID | pascalCase}}{{end}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
<a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>
<a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="c1"># Include response status code</span>
<a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{.OperationID | pascalCase}}{{.StatusCode}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
<a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a>
<a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a><span class="c1"># Tag-based naming</span>
<a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a>oastools<span class="w"> </span>join<span class="w"> </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{firstTag .Tags | pascalCase}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
</code></pre></div>
<h3 id="overlay-integration">Overlay Integration</h3>
<p>Apply overlays during the join process:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="c1"># Pre-overlay: applied to each input before merging</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="c1"># Post-overlay: applied to the final merged result</span>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>oastools<span class="w"> </span>join<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="w">  </span>--pre-overlay<span class="w"> </span>normalize.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w">  </span>--post-overlay<span class="w"> </span>enhance.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a>
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="c1"># Multiple overlays (applied in order)</span>
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a>oastools<span class="w"> </span>join<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a><span class="w">  </span>--pre-overlay<span class="w"> </span>strip-internal.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a><span class="w">  </span>--pre-overlay<span class="w"> </span>standardize-responses.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a><span class="w">  </span>--post-overlay<span class="w"> </span>add-security.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a><span class="w">  </span>--post-overlay<span class="w"> </span>add-metadata.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span>api1.yaml<span class="w"> </span>api2.yaml
</code></pre></div>
<p><strong>Example pre-overlay (normalize.yaml):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nt">overlay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Normalization Overlay</span>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="nt">actions</span><span class="p">:</span>
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$..description</span>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="w">    </span><span class="nt">update</span><span class="p">:</span>
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a><span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">  </span><span class="c1"># Clear all descriptions before merge</span>
</code></pre></div>
<p><strong>Example post-overlay (enhance.yaml):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="nt">overlay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="nt">info</span><span class="p">:</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Enhancement Overlay</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="nt">actions</span><span class="p">:</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$.info</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">    </span><span class="nt">update</span><span class="p">:</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Unified</span><span class="nv"> </span><span class="s">API&quot;</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0.0&quot;</span>
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$.servers</span>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">    </span><span class="nt">update</span><span class="p">:</span>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://api.example.com/v1</span>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Production</span>
</code></pre></div>
<h3 id="combined-features">Combined Features</h3>
<p>Use multiple features together for comprehensive join operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="c1"># Full-featured join with all options</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>oastools<span class="w"> </span>join<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">  </span>--schema-strategy<span class="w"> </span>rename-right<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">  </span>--operation-context<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w">  </span>--primary-operation-policy<span class="w"> </span>most-specific<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w">  </span>--rename-template<span class="w"> </span><span class="s2">&quot;{{coalesce .OperationID (pathResource .Path) | pascalCase}}{{.Name}}&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="w">  </span>--semantic-dedup<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="w">  </span>--pre-overlay<span class="w"> </span>normalize.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="w">  </span>--post-overlay<span class="w"> </span>finalize.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="w">  </span>-o<span class="w"> </span>merged.yaml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="w">  </span>users-service.yaml<span class="w"> </span>orders-service.yaml<span class="w"> </span>billing-service.yaml
</code></pre></div>
<p>This command:</p>
<ol>
<li>Applies <code>normalize.yaml</code> to each input document</li>
<li>Joins the documents with semantic deduplication</li>
<li>Renames colliding schemas using operation context</li>
<li>Uses the most-specific operation policy for context selection</li>
<li>Applies <code>finalize.yaml</code> to the merged result</li>
</ol>
<p>For complete API documentation and programmatic usage, see the sections above or the <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner">Go package documentation</a>.</p>
<hr />
<h2 id="learn-more">Learn More</h2>
<p>For additional examples and complete API documentation:</p>
<ul>
<li>üì¶ <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner">API Reference on pkg.go.dev</a> - Complete API documentation with all examples</li>
<li>üîó <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner#example-package">Basic example</a> - Merge two OpenAPI specifications</li>
<li>‚öôÔ∏è <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner#example-package-CustomStrategies">Custom strategies example</a> - Configure collision handling per component type</li>
<li>üßπ <a href="https://pkg.go.dev/github.com/erraggy/oastools/joiner#example-package-SemanticDeduplication">Semantic deduplication example</a> - Consolidate identical schemas</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "toc.follow", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
<script>
// Clear stale repository facts cache (TTL: 1 hour)
// MkDocs Material caches GitHub repo stats in sessionStorage indefinitely.
// This override adds TTL expiration so users see updated release versions.
(function() {
  var TTL_MS = 60 * 60 * 1000; // 1 hour
  var scope = new URL("../..", location);
  var key = scope.pathname + ".__source";
  var ttlKey = key + "_ts";

  var timestamp = sessionStorage.getItem(ttlKey);
  if (timestamp && (Date.now() - parseInt(timestamp, 10)) > TTL_MS) {
    sessionStorage.removeItem(key);
    sessionStorage.removeItem(ttlKey);
  }

  // Patch __md_set to track timestamps for __source
  var originalSet = window.__md_set;
  if (originalSet) {
    window.__md_set = function(k, v, storage, s) {
      originalSet(k, v, storage, s);
      if (k === "__source" && storage === sessionStorage) {
        sessionStorage.setItem(ttlKey, Date.now().toString());
      }
    };
  }
})();

</script>

      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
<script>
// Open external links in new tabs ‚Äî compatible with navigation.instant
document$.subscribe(function() {
  var host = location.hostname;
  document.querySelectorAll("a[href]").forEach(function(a) {
    try {
      var url = new URL(a.href);
      if (url.hostname && url.hostname !== host) {
        a.setAttribute("target", "_blank");
        a.setAttribute("rel", "noopener noreferrer");
      }
    } catch(e) {}
  });
});
</script>

  </body>
</html>